(function(){"use strict";var e=Ember;var r=Ember.get;var t=Ember.Mixin.create({buildURL:function(e,r,t,i,n){switch(i){case"findRecord":return this.urlForFindRecord(r,e,t);case"findAll":return this.urlForFindAll(e);case"query":return this.urlForQuery(n,e);case"queryRecord":return this.urlForQueryRecord(n,e);case"findMany":return this.urlForFindMany(r,e,t);case"findHasMany":return this.urlForFindHasMany(r,e);case"findBelongsTo":return this.urlForFindBelongsTo(r,e);case"createRecord":return this.urlForCreateRecord(e,t);case"updateRecord":return this.urlForUpdateRecord(r,e,t);case"deleteRecord":return this.urlForDeleteRecord(r,e,t);default:return this._buildURL(e,r)}},_buildURL:function(e,t){var i=[];var n=r(this,"host");var a=this.urlPrefix();var o;if(e){o=this.pathForType(e);if(o){i.push(o)}}if(t){i.push(encodeURIComponent(t))}if(a){i.unshift(a)}i=i.join("/");if(!n&&i&&i.charAt(0)!=="/"){i="/"+i}return i},urlForFindRecord:function(e,r,t){return this._buildURL(r,e)},urlForFindAll:function(e){return this._buildURL(e)},urlForQuery:function(e,r){return this._buildURL(r)},urlForQueryRecord:function(e,r){return this._buildURL(r)},urlForFindMany:function(e,r,t){return this._buildURL(r)},urlForFindHasMany:function(e,r){return this._buildURL(r,e)},urlForFindBelongsTo:function(e,r){return this._buildURL(r,e)},urlForCreateRecord:function(e,r){return this._buildURL(e)},urlForUpdateRecord:function(e,r,t){return this._buildURL(r,e)},urlForDeleteRecord:function(e,r,t){return this._buildURL(r,e)},urlPrefix:function(e,t){var i=r(this,"host");var n=r(this,"namespace");var a=[];if(e){if(/^\/\//.test(e)){}else if(e.charAt(0)==="/"){if(i){e=e.slice(1);a.push(i)}}else if(!/^http(s)?:\/\//.test(e)){a.push(t)}}else{if(i){a.push(i)}if(n){a.push(n)}}if(e){a.push(e)}return a.join("/")},pathForType:function(e){var r=Ember.String.camelize(e);return Ember.String.pluralize(r)}});var i=Ember.Error;var n=/^\/?data\/(attributes|relationships)\/(.*)/;var a=/^\/?data/;var o="base";function s(e){var r=arguments.length<=1||arguments[1]===undefined?"Adapter operation failed":arguments[1];i.call(this,r);this.errors=e||[{title:"Adapter Error",detail:r}]}s.prototype=Object.create(i.prototype);function d(e){s.call(this,e,"The adapter rejected the commit because it was invalid")}d.prototype=Object.create(s.prototype);function u(){s.call(this,null,"The adapter operation timed out")}u.prototype=Object.create(s.prototype);function l(){s.call(this,null,"The adapter operation was aborted")}l.prototype=Object.create(s.prototype);function c(e){var r=[];if(Ember.isPresent(e)){Object.keys(e).forEach(function(t){var i=Ember.makeArray(e[t]);for(var n=0;n<i.length;n++){var a="Invalid Attribute";var s="/data/attributes/"+t;if(t===o){a="Invalid Document";s="/data"}r.push({title:a,detail:i[n],source:{pointer:s}})}})}return r}function h(e){var r={};if(Ember.isPresent(e)){e.forEach(function(e){if(e.source&&e.source.pointer){var t=e.source.pointer.match(n);if(t){t=t[2]}else if(e.source.pointer.search(a)!==-1){t=o}if(t){r[t]=r[t]||[];r[t].push(e.detail||e.title)}}})}return r}var f=Ember.get;var p=Ember.Object.extend({defaultSerializer:"-default",findRecord:null,findAll:null,query:null,queryRecord:null,generateIdForRecord:null,serialize:function(e,r){return f(e.record,"store").serializerFor(e.modelName).serialize(e,r)},createRecord:null,updateRecord:null,deleteRecord:null,coalesceFindRequests:true,groupRecordsForFindMany:function(e,r){return[r]},shouldReloadRecord:function(e,r){return false},shouldReloadAll:function(e,r){return!r.length},shouldBackgroundReloadRecord:function(e,r){return true},shouldBackgroundReloadAll:function(e,r){return true}});var m=p;var v=b;var y=Object.create(null,{constructor:{value:undefined,enumerable:false,writable:true}});function b(){}b.prototype=y;var g=Ember.get;var R=Ember.MapWithDefault;var _=m.extend(t,{defaultSerializer:"-rest",sortQueryParams:function(e){var r=Object.keys(e);var t=r.length;if(t<2){return e}var i={};var n=r.sort();for(var a=0;a<t;a++){i[n[a]]=e[n[a]]}return i},coalesceFindRequests:false,findRecord:function(e,r,t,i){return this.ajax(this.buildURL(r.modelName,t,i,"findRecord"),"GET")},findAll:function(e,r,t){var i,n;if(t){i={since:t}}n=this.buildURL(r.modelName,null,null,"findAll");return this.ajax(n,"GET",{data:i})},query:function(e,r,t){var i=this.buildURL(r.modelName,null,null,"query",t);if(this.sortQueryParams){t=this.sortQueryParams(t)}return this.ajax(i,"GET",{data:t})},queryRecord:function(e,r,t){var i=this.buildURL(r.modelName,null,null,"queryRecord",t);if(this.sortQueryParams){t=this.sortQueryParams(t)}return this.ajax(i,"GET",{data:t})},findMany:function(e,r,t,i){var n=this.buildURL(r.modelName,t,i,"findMany");return this.ajax(n,"GET",{data:{ids:t}})},findHasMany:function(e,r,t,i){var n=r.id;var a=r.modelName;t=this.urlPrefix(t,this.buildURL(a,n,null,"findHasMany"));return this.ajax(t,"GET")},findBelongsTo:function(e,r,t,i){var n=r.id;var a=r.modelName;t=this.urlPrefix(t,this.buildURL(a,n,null,"findBelongsTo"));return this.ajax(t,"GET")},createRecord:function(e,r,t){var i={};var n=e.serializerFor(r.modelName);var a=this.buildURL(r.modelName,null,t,"createRecord");n.serializeIntoHash(i,r,t,{includeId:true});return this.ajax(a,"POST",{data:i})},updateRecord:function(e,r,t){var i={};var n=e.serializerFor(r.modelName);n.serializeIntoHash(i,r,t);var a=t.id;var o=this.buildURL(r.modelName,a,t,"updateRecord");return this.ajax(o,"PUT",{data:i})},deleteRecord:function(e,r,t){var i=t.id;return this.ajax(this.buildURL(r.modelName,i,t,"deleteRecord"),"DELETE")},_stripIDFromURL:function(e,r){var t=this.buildURL(r.modelName,r.id,r);var i=t.split("/");var n=i[i.length-1];var a=r.id;if(n===a){i[i.length-1]=""}else if(F(n,"?id="+a)){i[i.length-1]=n.substring(0,n.length-a.length-1)}return i.join("/")},maxURLLength:2048,groupRecordsForFindMany:function(e,r){var t=R.create({defaultValue:function(){return[]}});var i=this;var n=this.maxURLLength;r.forEach(function(r){var n=i._stripIDFromURL(e,r);t.get(n).push(r)});function a(r,t,n){var a=i._stripIDFromURL(e,r[0]);var o=0;var s=[[]];r.forEach(function(e){var r=encodeURIComponent(e.id).length+n;if(a.length+o+r>=t){o=0;s.push([])}o+=r;var i=s.length-1;s[i].push(e)});return s}var o=[];t.forEach(function(e,r){var t="&ids%5B%5D=".length;var i=a(e,n,t);i.forEach(function(e){return o.push(e)})});return o},handleResponse:function(e,r,t){if(this.isSuccess(e,r,t)){return t}else if(this.isInvalid(e,r,t)){return new d(t.errors)}var i=this.normalizeErrorResponse(e,r,t);return new s(i)},isSuccess:function(e,r,t){return e>=200&&e<300||e===304},isInvalid:function(e,r,t){return e===422},ajax:function(e,r,t){var i=this;return new Ember.RSVP.Promise(function(n,a){var o=i.ajaxOptions(e,r,t);o.success=function(e,r,t){var o=undefined;if(!(o instanceof s)){o=i.handleResponse(t.status,E(t.getAllResponseHeaders()),o||e)}if(o instanceof s){Ember.run(null,a,o)}else{Ember.run(null,n,o)}};o.error=function(e,r,t){var n=undefined;if(!(n instanceof Error)){if(t instanceof Error){n=t}else if(r==="timeout"){n=new u}else if(r==="abort"){n=new l}else{n=i.handleResponse(e.status,E(e.getAllResponseHeaders()),i.parseErrorResponse(e.responseText)||t)}}Ember.run(null,a,n)};Ember.$.ajax(o)},"DS: RESTAdapter#ajax "+r+" to "+e)},ajaxOptions:function(e,r,t){var i=t||{};i.url=e;i.type=r;i.dataType="json";i.context=this;if(i.data&&r!=="GET"){i.contentType="application/json; charset=utf-8";i.data=JSON.stringify(i.data)}var n=g(this,"headers");if(n!==undefined){i.beforeSend=function(e){Object.keys(n).forEach(function(r){return e.setRequestHeader(r,n[r])})}}return i},parseErrorResponse:function(e){var r=e;try{r=Ember.$.parseJSON(e)}catch(t){}return r},normalizeErrorResponse:function(e,r,t){if(t&&typeof t==="object"&&t.errors){return t.errors}else{return[{status:""+e,title:"The backend responded with an error",detail:""+t}]}}});function E(e){var r=new v;if(!e){return r}var t=e.split("\r\n");for(var i=0;i<t.length;i++){var n=t[i];var a=n.indexOf(": ");if(a>0){var o=n.substring(0,a);var s=n.substring(a+2);r[o]=s}}return r}function F(e,r){if(typeof String.prototype.endsWith!=="function"){return e.indexOf(r,e.length-r.length)!==-1}else{return e.endsWith(r)}}var A=_;var M=A.extend({defaultSerializer:"-json-api",ajaxOptions:function(e,r,t){var i=this._super.apply(this,arguments);if(i.contentType){i.contentType="application/vnd.api+json"}var n=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("Accept","application/vnd.api+json");if(n){n(e)}};return i},coalesceFindRequests:false,findMany:function(e,r,t,i){var n=this.buildURL(r.modelName,t,i,"findMany");return this.ajax(n,"GET",{data:{filter:{id:t.join(",")}}})},pathForType:function(e){var r=Ember.String.dasherize(e);return Ember.String.pluralize(r)},updateRecord:function(e,r,t){var i={};var n=e.serializerFor(r.modelName);n.serializeIntoHash(i,r,t,{includeId:true});var a=t.id;var o=this.buildURL(r.modelName,a,t,"updateRecord");return this.ajax(o,"PATCH",{data:i})}});var z=Ember.Namespace.create({VERSION:"2.2.1"});if(Ember.libraries){Ember.libraries.registerCoreLibrary("Ember Data",z.VERSION)}var k={};Ember.merge(Ember.FEATURES,k);var S=z;var T=w;function w(e){switch(typeof e){case"object":return e;case"string":return{href:e}}return null}var C=D;function D(e){return Ember.String.dasherize(e)}var O=Ember.RSVP.Promise;var P=Ember.get;var I=Ember.ArrayProxy.extend(Ember.PromiseProxyMixin);var N=Ember.ObjectProxy.extend(Ember.PromiseProxyMixin);var L=function(e,r){return N.create({promise:O.resolve(e,r)})};var x=function(e,r){return I.create({promise:O.resolve(e,r)})};function $(e){return function(){var r=P(this,"content");return r[e].apply(r,arguments)}}var j=I.extend({reload:function(){return j.create({promise:P(this,"content").reload()})},createRecord:$("createRecord"),on:$("on"),one:$("one"),trigger:$("trigger"),off:$("off"),has:$("has")});var K=function(e,r){return j.create({promise:O.resolve(e,r)})};var H=Ember.get;function B(e){var r=Array.prototype.slice.call(arguments,1);return function(){return e.apply(undefined,r)}}function U(e,r){var t=e["finally"](function(){if(!r()){t._subscribers.length=0}});return t}function V(e){return!(H(e,"isDestroyed")||H(e,"isDestroying"))}function q(e){var r=[];if(!e||typeof e!=="object"){r.push("Top level of a JSON API document must be an object")}else{if(!("data"in e)&&!("errors"in e)&&!("meta"in e)){r.push('One or more of the following keys must be present: "data", "errors", "meta".')}else{if("data"in e&&"errors"in e){r.push('Top level keys "errors" and "data" cannot both be present in a JSON API document')}}if("data"in e){if(!(e.data===null||Ember.isArray(e.data)||typeof e.data==="object")){r.push("data must be null, an object, or an array")}}if("meta"in e){if(typeof e.meta!=="object"){r.push("meta must be an object")}}if("errors"in e){if(!Ember.isArray(e.errors)){r.push("errors must be an array")}}if("links"in e){if(typeof e.links!=="object"){r.push("links must be an object")}}if("jsonapi"in e){if(typeof e.jsonapi!=="object"){r.push("jsonapi must be an object")}}if("included"in e){if(typeof e.included!=="object"){r.push("included must be an array")}}}return r}function W(e,r,t,i,n,a){var o=e.normalizeResponse(r,t,i,n,a);var s=[];if(o.meta){r._setMetadataFor(t.modelName,o.meta)}return o}function Q(e,r,t){var i=r.serializer;if(i===undefined){i=e.serializerFor(t)}if(i===null||i===undefined){i={extract:function(e,r,t){return t}}}return i}var G=Ember.RSVP.Promise;function J(e,r,t,i,n,a){var o=n.createSnapshot(a);var s=e.findRecord(r,t,i,o);var d=Q(r,e,n.type.modelName);var u="DS: Handle Adapter#find of "+t+" with id: "+i;s=G.resolve(s,u);s=U(s,B(V,r));return s.then(function(e){return r._adapterRun(function(){var n=W(d,r,t,e,i,"findRecord");var a=r.push(n);return a._internalModel})},function(e){n.notFound();if(n.isEmpty()){n.unloadRecord()}throw e},"DS: Extract payload of '"+t+"'")}function Y(e,r,t,i,n){var a=Ember.A(n).invoke("createSnapshot");var o=e.findMany(r,t,i,a);var s=Q(r,e,t.modelName);var d="DS: Handle Adapter#findMany of "+t;if(o===undefined){throw new Error("adapter.findMany returned undefined, this was very likely a mistake")}o=G.resolve(o,d);o=U(o,B(V,r));return o.then(function(e){return r._adapterRun(function(){var i=W(s,r,t,e,null,"findMany");var n=r.push(i);return n.map(function(e){return e._internalModel})})},null,"DS: Extract payload of "+t)}function X(e,r,t,i,n){var a=t.createSnapshot();var o=r.modelFor(n.type);var s=e.findHasMany(r,a,i,n);var d=Q(r,e,n.type);var u="DS: Handle Adapter#findHasMany of "+t+" : "+n.type;s=G.resolve(s,u);s=U(s,B(V,r));s=U(s,B(V,t));return s.then(function(e){return r._adapterRun(function(){var t=W(d,r,o,e,null,"findHasMany");var i=r.push(t);var n=i.map(function(e){return e._internalModel});n.meta=t.meta;return n})},null,"DS: Extract payload of "+t+" : hasMany "+n.type)}function Z(e,r,t,i,n){var a=t.createSnapshot();var o=r.modelFor(n.type);var s=e.findBelongsTo(r,a,i,n);var d=Q(r,e,n.type);var u="DS: Handle Adapter#findBelongsTo of "+t+" : "+n.type;s=G.resolve(s,u);s=U(s,B(V,r));s=U(s,B(V,t));return s.then(function(e){return r._adapterRun(function(){var t=W(d,r,o,e,null,"findBelongsTo");if(!t.data){return null}var i=r.push(t);return i._internalModel})},null,"DS: Extract payload of "+t+" : "+n.type)}function ee(e,r,t,i,n){var a=t.modelName;var o=r.peekAll(a);var s=o.createSnapshot(n);var d=e.findAll(r,t,i,s);var u=Q(r,e,a);var l="DS: Handle Adapter#findAll of "+t;d=G.resolve(d,l);d=U(d,B(V,r));return d.then(function(e){r._adapterRun(function(){var i=W(u,r,t,e,null,"findAll");r.push(i)});r.didUpdateAll(t);return r.peekAll(a)},null,"DS: Extract payload of findAll "+t)}function re(e,r,t,i,n){var a=t.modelName;var o=e.query(r,t,i,n);var s=Q(r,e,a);var d="DS: Handle Adapter#findQuery of "+t;o=G.resolve(o,d);o=U(o,B(V,r));return o.then(function(e){var i;r._adapterRun(function(){var n=W(s,r,t,e,null,"query");i=r.push(n)});n.loadRecords(i);return n},null,"DS: Extract payload of findQuery "+t)}function te(e,r,t,i){var n=t.modelName;var a=e.queryRecord(r,t,i);var o=Q(r,e,n);var s="DS: Handle Adapter#queryRecord of "+t;a=G.resolve(a,s);a=U(a,B(V,r));return a.then(function(e){var i;r._adapterRun(function(){var n=W(o,r,t,e,null,"queryRecord");i=r.push(n)});return i},null,"DS: Extract payload of queryRecord "+t)}var ie=e.get;var ne=function(r,t,i){var n=i.type.modelName;var a=r.type.modelName;var o=t.key;var s=r.store.modelFor(t.type);var d="You cannot add a record of type '"+n+"' to the '"+a+"."+o+"' relationship (only '"+s.modelName+"' allowed)";e.assert(d,ae(s,i))};function ae(r,t){if(r.__isMixin){return r.__mixin.detect(t.type.PrototypeMixin)}if(e.MODEL_FACTORY_INJECTIONS){r=r.superclass}return r.detect(t.type)}function oe(e){return ie(e,"attributes").has("type")||ie(e,"relationshipsByName").has("type")}function se(r){var t;if(e.getOwner){t=e.getOwner(r)}if(!t&&r.container){t=r.container}if(t&&t.lookupFactory&&!t._lookupFactory){t._lookupFactory=t.lookupFactory;t.register=function(){var e=t.registry||t._registry||t;return e.register.apply(e,arguments)}}return t}var de=ue;function ue(e){return e==null||e===""?null:e+""}var le=ce;function ce(e,r,t){this._snapshots=null;this._recordArray=e;this.length=e.get("length");this.type=e.get("type");this.meta=r;this.adapterOptions=t}ce.prototype.snapshots=function(){if(this._snapshots){return this._snapshots}var e=this._recordArray;this._snapshots=e.invoke("createSnapshot");return this._snapshots};var he=Ember.get;var fe=Ember.set;var pe=Ember.ArrayProxy.extend(Ember.Evented,{type:null,content:null,isLoaded:false,isUpdating:false,store:null,objectAtContent:function(e){var r=he(this,"content");var t=r.objectAt(e);return t&&t.getRecord()},update:function(){if(he(this,"isUpdating")){return}var e=he(this,"store");var r=he(this,"type.modelName");return e.findAll(r,{reload:true})},addInternalModel:function(e,r){var t=he(this,"content");if(r===undefined){t.addObject(e)}else if(!t.contains(e)){t.insertAt(r,e)}},removeInternalModel:function(e){he(this,"content").removeObject(e)},save:function(){var e=this;var r="DS: RecordArray#save "+he(this,"type");var t=Ember.RSVP.all(this.invoke("save"),r).then(function(r){return e},null,"DS: RecordArray#save return RecordArray");return I.create({promise:t})},_dissociateFromOwnRecords:function(){var e=this;this.get("content").forEach(function(r){var t=r._recordArrays;if(t){t["delete"](e)}})},_unregisterFromManager:function(){var e=he(this,"manager");e.unregisterRecordArray(this)},willDestroy:function(){this._unregisterFromManager();this._dissociateFromOwnRecords();fe(this,"content",undefined);this._super.apply(this,arguments)},createSnapshot:function(e){var r=e&&e.adapterOptions;var t=this.get("meta");return new le(this,t,r)}});var me=Ember.get;var ve=pe.extend({filterFunction:null,isLoaded:true,replace:function(){var e=me(this,"type").toString();throw new Error("The result of a client-side filter (on "+e+") is immutable.")},_updateFilter:function(){var e=me(this,"manager");e.updateFilter(this,me(this,"type"),me(this,"filterFunction"))},updateFilter:Ember.observer("filterFunction",function(){Ember.run.once(this,this._updateFilter)})});var ye=be;function be(e){var r=new v;for(var t in e){r[t]=e[t]}return r}var ge=Ember.get;var Re=pe.extend({query:null,replace:function(){var e=ge(this,"type").toString();throw new Error("The result of a server query (on "+e+") is immutable.")},load:function(e){var r=ge(this,"store");var t=ge(this,"type");var i=t.modelName;var n=r.pushMany(i,e);this.loadRecords(n)},loadRecords:function(e){var r=this;var t=ge(this,"store");var i=ge(this,"type");var n=i.modelName;var a=t._metadataFor(n);var o=Ember.A(e).mapBy("_internalModel");this.setProperties({content:Ember.A(o),isLoaded:true,meta:ye(a)});o.forEach(function(e){r.manager.recordArraysForRecord(e).add(r)});Ember.run.once(this,"trigger","didLoad")}});var _e=Ae;var Ee=Ember.OrderedSet;var Fe=Ember.guidFor;function Ae(){this._super$constructor()}Ae.create=function(){var e=this;return new e};Ae.prototype=Object.create(Ee.prototype);Ae.prototype.constructor=Ae;Ae.prototype._super$constructor=Ee;Ae.prototype.addWithIndex=function(e,r){var t=Fe(e);var i=this.presenceSet;var n=this.list;if(i[t]===true){return}i[t]=true;if(r===undefined||r==null){n.push(e)}else{n.splice(r,0,e)}this.size+=1;return this};var Me=Ember.MapWithDefault;var ze=Ember.get;var ke=Ember.Object.extend({init:function(){var e=this;this.filteredRecordArrays=Me.create({defaultValue:function(){return[]}});this.liveRecordArrays=Me.create({defaultValue:function(r){return e.createRecordArray(r)}});this.changedRecords=[];this._adapterPopulatedRecordArrays=[]},recordDidChange:function(e){if(this.changedRecords.push(e)!==1){return}Ember.run.schedule("actions",this,this.updateRecordArrays)},recordArraysForRecord:function(e){e._recordArrays=e._recordArrays||_e.create();return e._recordArrays},updateRecordArrays:function(){var e=this;this.changedRecords.forEach(function(r){if(ze(r,"record.isDestroyed")||ze(r,"record.isDestroying")||ze(r,"currentState.stateName")==="root.deleted.saved"){e._recordWasDeleted(r)}else{e._recordWasChanged(r)}});this.changedRecords.length=0},_recordWasDeleted:function(e){var r=e._recordArrays;if(!r){return}r.forEach(function(r){return r.removeInternalModel(e)});e._recordArrays=null},_recordWasChanged:function(e){var r=this;var t=e.type;var i=this.filteredRecordArrays.get(t);var n;i.forEach(function(i){n=ze(i,"filterFunction");r.updateFilterRecordArray(i,n,t,e)})},recordWasLoaded:function(e){var r=this;var t=e.type;var i=this.filteredRecordArrays.get(t);var n;i.forEach(function(i){n=ze(i,"filterFunction");r.updateFilterRecordArray(i,n,t,e)});if(this.liveRecordArrays.has(t)){var a=this.liveRecordArrays.get(t);this._addRecordToRecordArray(a,e)}},updateFilterRecordArray:function(e,r,t,i){var n=r(i.getRecord());var a=this.recordArraysForRecord(i);if(n){this._addRecordToRecordArray(e,i)}else{a["delete"](e);e.removeInternalModel(i)}},_addRecordToRecordArray:function(e,r){var t=this.recordArraysForRecord(r);if(!t.has(e)){e.addInternalModel(r);t.add(e)}},populateLiveRecordArray:function(e,r){var t=this.store.typeMapFor(r);var i=t.records;var n;for(var a=0,o=i.length;a<o;a++){n=i[a];if(!n.isDeleted()&&!n.isEmpty()){this._addRecordToRecordArray(e,n)}}},updateFilter:function(e,r,t){var i=this.store.typeMapFor(r);var n=i.records;var a;for(var o=0,s=n.length;o<s;o++){a=n[o];if(!a.isDeleted()&&!a.isEmpty()){this.updateFilterRecordArray(e,t,r,a)}}},liveRecordArrayFor:function(e){return this.liveRecordArrays.get(e)},createRecordArray:function(e){var r=pe.create({type:e,content:Ember.A(),store:this.store,isLoaded:true,manager:this});return r},createFilteredRecordArray:function(e,r,t){var i=ve.create({query:t,type:e,content:Ember.A(),store:this.store,manager:this,filterFunction:r});this.registerFilteredRecordArray(i,e,r);return i},createAdapterPopulatedRecordArray:function(e,r){var t=Re.create({type:e,query:r,content:Ember.A(),store:this.store,manager:this});this._adapterPopulatedRecordArrays.push(t);return t},registerFilteredRecordArray:function(e,r,t){var i=this.filteredRecordArrays.get(r);i.push(e);this.updateFilter(e,r,t)},unregisterRecordArray:function(e){var r=e.type;var t=this.filteredRecordArrays.get(r);var i=t.indexOf(e);if(i!==-1){t.splice(i,1)}else if(this.liveRecordArrays.has(r)){var n=this.liveRecordArrayFor(r);if(e===n){this.liveRecordArrays["delete"](r)}}},willDestroy:function(){this._super.apply(this,arguments);this.filteredRecordArrays.forEach(function(e){return Te(e).forEach(Se)});this.liveRecordArrays.forEach(Se);this._adapterPopulatedRecordArrays.forEach(Se)}});function Se(e){e.destroy()}function Te(e){var r=e.length;var t=Ember.A();for(var i=0;i<r;i++){t=t.concat(e[i])}return t}var we=Ce;function Ce(e){this._owner=e;this._cache=new v}Ce.prototype=new v;e.merge(Ce.prototype,{get:function(e,r,t){var i=this._cache;var n=e+":"+r;if(!(n in i)){var a=this.instanceFor(n)||this._findInstance(e,t);if(a){i[n]=a}}return i[n]},_findInstance:function(e,r){for(var t=0,i=r.length;t<i;t++){var n=r[t];var a=e+":"+n;var o=this.instanceFor(a);if(o){return o}}},instanceFor:function(e){var r=this._cache;if(!r[e]){var t=this._owner.lookup(e);if(t){r[e]=t}}return r[e]},destroy:function(){var e=this._cache;var r=Object.keys(e);for(var t=0,i=r.length;t<i;t++){var n=r[t];var a=e[n];if(a){a.destroy()}}this._owner=null},constructor:Ce,toString:function(){return"ContainerInstanceCache"}});var De=Oe;function Oe(e,r){if(!r||typeof r!=="object"){return e}var t=Object.keys(r);var i;var n=t.length;for(var a=0;a<n;a++){i=t[a];e[i]=r[i]}return e}var Pe=Ember.get;function Ie(e,r){if(r.value===r.originalValue){delete e._attributes[r.name];e.send("propertyWasReset",r.name)}else if(r.value!==r.oldValue){e.send("becomeDirty")}e.updateRecordArraysLater()}var Ne={initialState:"uncommitted",isDirty:true,uncommitted:{didSetProperty:Ie,loadingData:Ember.K,propertyWasReset:function(e,r){if(!e.hasChangedAttributes()){e.send("rolledBack")}},pushedData:function(e){e.updateChangedAttributes();if(!e.hasChangedAttributes()){e.transitionTo("loaded.saved")}},becomeDirty:Ember.K,willCommit:function(e){e.transitionTo("inFlight")},reloadRecord:function(e,r){r(e.store.reloadRecord(e))},rolledBack:function(e){e.transitionTo("loaded.saved")},becameInvalid:function(e){e.transitionTo("invalid")},rollback:function(e){e.rollbackAttributes();e.triggerLater("ready")}},inFlight:{isSaving:true,didSetProperty:Ie,becomeDirty:Ember.K,pushedData:Ember.K,unloadRecord:He,willCommit:Ember.K,didCommit:function(e){var r=Pe(this,"dirtyType");e.transitionTo("saved");e.send("invokeLifecycleCallbacks",r)},becameInvalid:function(e){e.transitionTo("invalid");e.send("invokeLifecycleCallbacks")},becameError:function(e){e.transitionTo("uncommitted");e.triggerLater("becameError",e)}},invalid:{isValid:false,deleteRecord:function(e){e.transitionTo("deleted.uncommitted")},didSetProperty:function(e,r){e.removeErrorMessageFromAttribute(r.name);Ie(e,r)},becameInvalid:Ember.K,becomeDirty:Ember.K,pushedData:Ember.K,willCommit:function(e){e.clearErrorMessages();e.transitionTo("inFlight")},rolledBack:function(e){e.clearErrorMessages();e.transitionTo("loaded.saved");e.triggerLater("ready")},becameValid:function(e){e.transitionTo("uncommitted")},invokeLifecycleCallbacks:function(e){e.triggerLater("becameInvalid",e)}}};function Le(e){var r={};var t;for(var i in e){t=e[i];if(t&&typeof t==="object"){r[i]=Le(t)}else{r[i]=t}}return r}function xe(e,r){for(var t in r){e[t]=r[t]}return e}function $e(e){var r=Le(Ne);return xe(r,e)}var je=$e({dirtyType:"created",isNew:true});je.invalid.rolledBack=function(e){e.transitionTo("deleted.saved")};je.uncommitted.rolledBack=function(e){e.transitionTo("deleted.saved")};var Ke=$e({dirtyType:"updated"});je.uncommitted.deleteRecord=function(e){e.transitionTo("deleted.saved");e.send("invokeLifecycleCallbacks")};je.uncommitted.rollback=function(e){Ne.uncommitted.rollback.apply(this,arguments);e.transitionTo("deleted.saved")};je.uncommitted.pushedData=function(e){e.transitionTo("loaded.updated.uncommitted");e.triggerLater("didLoad")};je.uncommitted.propertyWasReset=Ember.K;function He(e){}Ke.inFlight.unloadRecord=He;Ke.uncommitted.deleteRecord=function(e){e.transitionTo("deleted.uncommitted")};var Be={isEmpty:false,isLoading:false,isLoaded:false,isDirty:false,isSaving:false,isDeleted:false,isNew:false,isValid:true,rolledBack:Ember.K,unloadRecord:function(e){e.clearRelationships();e.transitionTo("deleted.saved")},propertyWasReset:Ember.K,empty:{isEmpty:true,loadingData:function(e,r){e._loadingPromise=r;e.transitionTo("loading")},loadedData:function(e){e.transitionTo("loaded.created.uncommitted");e.triggerLater("ready")},pushedData:function(e){e.transitionTo("loaded.saved");e.triggerLater("didLoad");e.triggerLater("ready")}},loading:{isLoading:true,exit:function(e){e._loadingPromise=null},pushedData:function(e){e.transitionTo("loaded.saved");e.triggerLater("didLoad");e.triggerLater("ready");e.didCleanError()},becameError:function(e){e.triggerLater("becameError",e)},notFound:function(e){e.transitionTo("empty")}},loaded:{initialState:"saved",isLoaded:true,loadingData:Ember.K,saved:{setup:function(e){if(e.hasChangedAttributes()){e.adapterDidDirty()}},didSetProperty:Ie,pushedData:Ember.K,becomeDirty:function(e){e.transitionTo("updated.uncommitted")},willCommit:function(e){e.transitionTo("updated.inFlight")},reloadRecord:function(e,r){r(e.store.reloadRecord(e))},deleteRecord:function(e){e.transitionTo("deleted.uncommitted")},unloadRecord:function(e){e.clearRelationships();e.transitionTo("deleted.saved")},didCommit:function(e){e.send("invokeLifecycleCallbacks",Pe(e,"lastDirtyType"))},notFound:Ember.K},created:je,updated:Ke},deleted:{initialState:"uncommitted",dirtyType:"deleted",isDeleted:true,isLoaded:true,isDirty:true,setup:function(e){e.updateRecordArrays()},uncommitted:{willCommit:function(e){e.transitionTo("inFlight")},rollback:function(e){e.rollbackAttributes();e.triggerLater("ready")},pushedData:Ember.K,becomeDirty:Ember.K,deleteRecord:Ember.K,rolledBack:function(e){e.transitionTo("loaded.saved");e.triggerLater("ready")}},inFlight:{isSaving:true,unloadRecord:He,willCommit:Ember.K,didCommit:function(e){e.transitionTo("saved");e.send("invokeLifecycleCallbacks")},becameError:function(e){e.transitionTo("uncommitted");e.triggerLater("becameError",e)},becameInvalid:function(e){e.transitionTo("invalid");e.triggerLater("becameInvalid",e)}},saved:{isDirty:false,setup:function(e){e.clearRelationships();var r=e.store;r._dematerializeRecord(e)},invokeLifecycleCallbacks:function(e){e.triggerLater("didDelete",e);e.triggerLater("didCommit",e)},willCommit:Ember.K,didCommit:Ember.K},invalid:{isValid:false,didSetProperty:function(e,r){e.removeErrorMessageFromAttribute(r.name);Ie(e,r)},becameInvalid:Ember.K,becomeDirty:Ember.K,deleteRecord:Ember.K,willCommit:Ember.K,rolledBack:function(e){e.clearErrorMessages();e.transitionTo("loaded.saved");e.triggerLater("ready")},becameValid:function(e){e.transitionTo("uncommitted")}}},invokeLifecycleCallbacks:function(e,r){if(r==="created"){e.triggerLater("didCreate",e)}else{e.triggerLater("didUpdate",e)}e.triggerLater("didCommit",e)}};function Ue(e,r,t){e=xe(r?Object.create(r):{},e);e.parentState=r;e.stateName=t;for(var i in e){if(!e.hasOwnProperty(i)||i==="parentState"||i==="stateName"){continue}if(typeof e[i]==="object"){e[i]=Ue(e[i],e,t+"."+i)}}return e}Be=Ue(Be,null,"root");var Ve=Be;var qe=We;function We(e,r,t,i){var n=i.options.async;this.members=new _e;this.canonicalMembers=new _e;this.store=e;this.key=i.key;this.inverseKey=t;this.record=r;this.isAsync=typeof n==="undefined"?true:n;this.relationshipMeta=i;this.inverseKeyForImplicit=this.record.constructor.modelName+this.key;this.linkPromise=null;this.meta=null;this.hasData=false;this.hasLoaded=false}We.prototype={constructor:We,destroy:Ember.K,updateMeta:function(e){this.meta=e},clear:function(){var e=this.members.list;var r;while(e.length>0){r=e[0];this.removeRecord(r)}},removeRecords:function(e){var r=this;e.forEach(function(e){return r.removeRecord(e)})},addRecords:function(e,r){var t=this;e.forEach(function(e){t.addRecord(e,r);if(r!==undefined){r++}})},addCanonicalRecords:function(e,r){for(var t=0;t<e.length;t++){if(r!==undefined){this.addCanonicalRecord(e[t],t+r)}else{this.addCanonicalRecord(e[t])}}},addCanonicalRecord:function(e,r){if(!this.canonicalMembers.has(e)){this.canonicalMembers.add(e);if(this.inverseKey){e._relationships.get(this.inverseKey).addCanonicalRecord(this.record)}else{if(!e._implicitRelationships[this.inverseKeyForImplicit]){e._implicitRelationships[this.inverseKeyForImplicit]=new We(this.store,e,this.key,{options:{}})}e._implicitRelationships[this.inverseKeyForImplicit].addCanonicalRecord(this.record)}}this.flushCanonicalLater();this.setHasData(true)},removeCanonicalRecords:function(e,r){for(var t=0;t<e.length;t++){if(r!==undefined){this.removeCanonicalRecord(e[t],t+r)}else{this.removeCanonicalRecord(e[t])}}},removeCanonicalRecord:function(e,r){if(this.canonicalMembers.has(e)){this.removeCanonicalRecordFromOwn(e);if(this.inverseKey){this.removeCanonicalRecordFromInverse(e)}else{if(e._implicitRelationships[this.inverseKeyForImplicit]){e._implicitRelationships[this.inverseKeyForImplicit].removeCanonicalRecord(this.record)}}}this.flushCanonicalLater()},addRecord:function(e,r){if(!this.members.has(e)){this.members.addWithIndex(e,r);this.notifyRecordRelationshipAdded(e,r);if(this.inverseKey){e._relationships.get(this.inverseKey).addRecord(this.record)}else{if(!e._implicitRelationships[this.inverseKeyForImplicit]){e._implicitRelationships[this.inverseKeyForImplicit]=new We(this.store,e,this.key,{options:{}})}e._implicitRelationships[this.inverseKeyForImplicit].addRecord(this.record)}this.record.updateRecordArraysLater()}this.setHasData(true)},removeRecord:function(e){if(this.members.has(e)){this.removeRecordFromOwn(e);if(this.inverseKey){this.removeRecordFromInverse(e)}else{if(e._implicitRelationships[this.inverseKeyForImplicit]){e._implicitRelationships[this.inverseKeyForImplicit].removeRecord(this.record)}}}},removeRecordFromInverse:function(e){var r=e._relationships.get(this.inverseKey);if(r){r.removeRecordFromOwn(this.record)}},removeRecordFromOwn:function(e){this.members["delete"](e);this.notifyRecordRelationshipRemoved(e);this.record.updateRecordArrays()},removeCanonicalRecordFromInverse:function(e){var r=e._relationships.get(this.inverseKey);if(r){r.removeCanonicalRecordFromOwn(this.record)}},removeCanonicalRecordFromOwn:function(e){this.canonicalMembers["delete"](e);this.flushCanonicalLater()},flushCanonical:function(){this.willSync=false;var e=[];for(var r=0;r<this.members.list.length;r++){if(this.members.list[r].isNew()){e.push(this.members.list[r])}}this.members=this.canonicalMembers.copy();for(r=0;r<e.length;r++){this.members.add(e[r])}},flushCanonicalLater:function(){var e=this;if(this.willSync){return}this.willSync=true;this.store._backburner.join(function(){return e.store._backburner.schedule("syncRelationships",e,e.flushCanonical)});
},updateLink:function(e){if(e!==this.link){this.link=e;this.linkPromise=null;this.setHasLoaded(false);this.record.notifyPropertyChange(this.key)}},findLink:function(){if(this.linkPromise){return this.linkPromise}else{var e=this.fetchLink();this.linkPromise=e;return e.then(function(e){return e})}},updateRecordsFromAdapter:function(e){this.computeChanges(e);this.setHasData(true);this.setHasLoaded(true)},notifyRecordRelationshipAdded:Ember.K,notifyRecordRelationshipRemoved:Ember.K,setHasData:function(e){this.hasData=e},setHasLoaded:function(e){this.hasLoaded=e}};var Qe=Ember.get;var Ge=Ember.set;var Je=Ember.Object.extend(Ember.MutableArray,Ember.Evented,{init:function(){this._super.apply(this,arguments);this.currentState=Ember.A([])},record:null,canonicalState:null,currentState:null,length:0,objectAt:function(e){if(!this.currentState[e]){return undefined}return this.currentState[e].getRecord()},flushCanonical:function(){var e=this.canonicalState.filter(function(e){return!e.isDeleted()});var r=this.currentState.filter(function(e){return e.isNew()});e=e.concat(r);var t=this.length;this.arrayContentWillChange(0,this.length,e.length);this.set("length",e.length);this.currentState=e;this.arrayContentDidChange(0,t,this.length);this.relationship.notifyHasManyChanged();this.record.updateRecordArrays()},isPolymorphic:false,isLoaded:false,relationship:null,meta:null,internalReplace:function(e,r,t){if(!t){t=[]}this.arrayContentWillChange(e,r,t.length);this.currentState.splice.apply(this.currentState,[e,r].concat(t));this.set("length",this.currentState.length);this.arrayContentDidChange(e,r,t.length);if(t){this.relationship.notifyHasManyChanged()}this.record.updateRecordArrays()},internalRemoveRecords:function(e){var r;for(var t=0;t<e.length;t++){r=this.currentState.indexOf(e[t]);this.internalReplace(r,1)}},internalAddRecords:function(e,r){if(r===undefined){r=this.currentState.length}this.internalReplace(r,0,e)},replace:function(e,r,t){var i;if(r>0){i=this.currentState.slice(e,e+r);this.get("relationship").removeRecords(i)}if(t){this.get("relationship").addRecords(t.map(function(e){return e._internalModel}),e)}},promise:null,loadingRecordsCount:function(e){this.loadingRecordsCount=e},loadedRecord:function(){this.loadingRecordsCount--;if(this.loadingRecordsCount===0){Ge(this,"isLoaded",true);this.trigger("didLoad")}},reload:function(){return this.relationship.reload()},save:function(){var e=this;var r="DS: ManyArray#save "+Qe(this,"type");var t=Ember.RSVP.all(this.invoke("save"),r).then(function(r){return e},null,"DS: ManyArray#save return ManyArray");return I.create({promise:t})},createRecord:function(e){var r=Qe(this,"store");var t=Qe(this,"type");var i;i=r.createRecord(t.modelName,e);this.pushObject(i);return i}});var Ye=Xe;function Xe(e,r,t,i){this._super$constructor(e,r,t,i);this.belongsToType=i.type;this.canonicalState=[];this.manyArray=Je.create({canonicalState:this.canonicalState,store:this.store,relationship:this,type:this.store.modelFor(this.belongsToType),record:r});this.isPolymorphic=i.options.polymorphic;this.manyArray.isPolymorphic=this.isPolymorphic}Xe.prototype=Object.create(qe.prototype);Xe.prototype.constructor=Xe;Xe.prototype._super$constructor=qe;Xe.prototype.destroy=function(){this.manyArray.destroy()};Xe.prototype._super$updateMeta=qe.prototype.updateMeta;Xe.prototype.updateMeta=function(e){this._super$updateMeta(e);this.manyArray.set("meta",e)};Xe.prototype._super$addCanonicalRecord=qe.prototype.addCanonicalRecord;Xe.prototype.addCanonicalRecord=function(e,r){if(this.canonicalMembers.has(e)){return}if(r!==undefined){this.canonicalState.splice(r,0,e)}else{this.canonicalState.push(e)}this._super$addCanonicalRecord(e,r)};Xe.prototype._super$addRecord=qe.prototype.addRecord;Xe.prototype.addRecord=function(e,r){if(this.members.has(e)){return}this._super$addRecord(e,r);this.manyArray.internalAddRecords([e],r)};Xe.prototype._super$removeCanonicalRecordFromOwn=qe.prototype.removeCanonicalRecordFromOwn;Xe.prototype.removeCanonicalRecordFromOwn=function(e,r){var t=r;if(!this.canonicalMembers.has(e)){return}if(t===undefined){t=this.canonicalState.indexOf(e)}if(t>-1){this.canonicalState.splice(t,1)}this._super$removeCanonicalRecordFromOwn(e,r)};Xe.prototype._super$flushCanonical=qe.prototype.flushCanonical;Xe.prototype.flushCanonical=function(){this.manyArray.flushCanonical();this._super$flushCanonical()};Xe.prototype._super$removeRecordFromOwn=qe.prototype.removeRecordFromOwn;Xe.prototype.removeRecordFromOwn=function(e,r){if(!this.members.has(e)){return}this._super$removeRecordFromOwn(e,r);if(r!==undefined){this.manyArray.currentState.removeAt(r)}else{this.manyArray.internalRemoveRecords([e])}};Xe.prototype.notifyRecordRelationshipAdded=function(e,r){ne(this.record,this.relationshipMeta,e);this.record.notifyHasManyAdded(this.key,e,r)};Xe.prototype.reload=function(){var e=this;if(this.link){return this.fetchLink()}else{return this.store.scheduleFetchMany(this.manyArray.toArray()).then(function(){e.manyArray.set("isLoaded",true);return e.manyArray})}};Xe.prototype.computeChanges=function(e){var r=this.canonicalMembers;var t=[];var i;var n;var a;e=Ze(e);r.forEach(function(r){if(e.has(r)){return}t.push(r)});this.removeCanonicalRecords(t);e=e.toArray();i=e.length;for(a=0;a<i;a++){n=e[a];this.removeCanonicalRecord(n);this.addCanonicalRecord(n,a)}};Xe.prototype.fetchLink=function(){var e=this;return this.store.findHasMany(this.record,this.link,this.relationshipMeta).then(function(r){if(r.hasOwnProperty("meta")){e.updateMeta(r.meta)}e.store._backburner.join(function(){e.updateRecordsFromAdapter(r)});return e.manyArray})};Xe.prototype.findRecords=function(){var e=this;return this.store.findMany(this.manyArray.toArray().map(function(e){return e._internalModel})).then(function(){if(!e.manyArray.get("isDestroyed")){e.manyArray.set("isLoaded",true)}return e.manyArray})};Xe.prototype.notifyHasManyChanged=function(){this.record.notifyHasManyAdded(this.key)};Xe.prototype.getRecords=function(){var e=this;if(this.isAsync){var r;if(this.link){if(this.hasLoaded){r=this.findRecords()}else{r=this.findLink().then(function(){return e.findRecords()})}}else{r=this.findRecords()}return j.create({content:this.manyArray,promise:r})}else{if(!this.manyArray.get("isDestroyed")){this.manyArray.set("isLoaded",true)}return this.manyArray}};function Ze(e){var r=new _e;if(e){for(var t=0,i=e.length;t<i;t++){r.add(e[t])}}return r}var er=rr;function rr(e,r,t,i){this._super$constructor(e,r,t,i);this.record=r;this.key=i.key;this.inverseRecord=null;this.canonicalState=null}rr.prototype=Object.create(qe.prototype);rr.prototype.constructor=rr;rr.prototype._super$constructor=qe;rr.prototype.setRecord=function(e){if(e){this.addRecord(e)}else if(this.inverseRecord){this.removeRecord(this.inverseRecord)}this.setHasData(true);this.setHasLoaded(true)};rr.prototype.setCanonicalRecord=function(e){if(e){this.addCanonicalRecord(e)}else if(this.inverseRecord){this.removeCanonicalRecord(this.inverseRecord)}this.setHasData(true);this.setHasLoaded(true)};rr.prototype._super$addCanonicalRecord=qe.prototype.addCanonicalRecord;rr.prototype.addCanonicalRecord=function(e){if(this.canonicalMembers.has(e)){return}if(this.canonicalState){this.removeCanonicalRecord(this.canonicalState)}this.canonicalState=e;this._super$addCanonicalRecord(e)};rr.prototype._super$flushCanonical=qe.prototype.flushCanonical;rr.prototype.flushCanonical=function(){if(this.inverseRecord&&this.inverseRecord.isNew()&&!this.canonicalState){return}this.inverseRecord=this.canonicalState;this.record.notifyBelongsToChanged(this.key);this._super$flushCanonical()};rr.prototype._super$addRecord=qe.prototype.addRecord;rr.prototype.addRecord=function(e){if(this.members.has(e)){return}ne(this.record,this.relationshipMeta,e);if(this.inverseRecord){this.removeRecord(this.inverseRecord)}this.inverseRecord=e;this._super$addRecord(e);this.record.notifyBelongsToChanged(this.key)};rr.prototype.setRecordPromise=function(e){var r=e.get&&e.get("content");this.setRecord(r?r._internalModel:r)};rr.prototype._super$removeRecordFromOwn=qe.prototype.removeRecordFromOwn;rr.prototype.removeRecordFromOwn=function(e){if(!this.members.has(e)){return}this.inverseRecord=null;this._super$removeRecordFromOwn(e);this.record.notifyBelongsToChanged(this.key)};rr.prototype._super$removeCanonicalRecordFromOwn=qe.prototype.removeCanonicalRecordFromOwn;rr.prototype.removeCanonicalRecordFromOwn=function(e){if(!this.canonicalMembers.has(e)){return}this.canonicalState=null;this._super$removeCanonicalRecordFromOwn(e)};rr.prototype.findRecord=function(){if(this.inverseRecord){return this.store._findByInternalModel(this.inverseRecord)}else{return Ember.RSVP.Promise.resolve(null)}};rr.prototype.fetchLink=function(){var e=this;return this.store.findBelongsTo(this.record,this.link,this.relationshipMeta).then(function(r){if(r){e.addRecord(r)}return r})};rr.prototype.getRecord=function(){var e=this;if(this.isAsync){var r;if(this.link){if(this.hasLoaded){r=this.findRecord()}else{r=this.findLink().then(function(){return e.findRecord()})}}else{r=this.findRecord()}return N.create({promise:r,content:this.inverseRecord?this.inverseRecord.getRecord():null})}else{if(this.inverseRecord===null){return null}var t=this.inverseRecord.getRecord();return t}};var tr=ar;var ir=Ember.get;function nr(e,r,t){var i;var n=e.type.inverseFor(r.key,t);if(n){i=n.name}if(r.kind==="hasMany"){return new Ye(t,e,i,r)}else{return new er(t,e,i,r)}}function ar(e){this.record=e;this.initializedRelationships=new v}ar.prototype.has=function(e){return!!this.initializedRelationships[e]};ar.prototype.get=function(e){var r=this.initializedRelationships;var t=ir(this.record.type,"relationshipsByName");if(!r[e]&&t.get(e)){r[e]=nr(this.record,t.get(e),this.record.store)}return r[e]};var or=dr;var sr=Ember.get;function dr(e){var r=this;this._attributes=new v;this._belongsToRelationships=new v;this._belongsToIds=new v;this._hasManyRelationships=new v;this._hasManyIds=new v;var t=e.getRecord();this.record=t;t.eachAttribute(function(e){return r._attributes[e]=sr(t,e)});this.id=e.id;this._internalModel=e;this.type=e.type;this.modelName=e.type.modelName;this._changedAttributes=t.changedAttributes()}dr.prototype={constructor:dr,id:null,record:null,type:null,modelName:null,attr:function(e){if(e in this._attributes){return this._attributes[e]}throw new Ember.Error("Model '"+Ember.inspect(this.record)+"' has no attribute named '"+e+"' defined.")},attributes:function(){return Ember.copy(this._attributes)},changedAttributes:function(){var e=new v;var r=Object.keys(this._changedAttributes);for(var t=0,i=r.length;t<i;t++){var n=r[t];e[n]=Ember.copy(this._changedAttributes[n])}return e},belongsTo:function(e,r){var t=r&&r.id;var i,n,a;var o;if(t&&e in this._belongsToIds){return this._belongsToIds[e]}if(!t&&e in this._belongsToRelationships){return this._belongsToRelationships[e]}i=this._internalModel._relationships.get(e);if(!(i&&i.relationshipMeta.kind==="belongsTo")){throw new Ember.Error("Model '"+Ember.inspect(this.record)+"' has no belongsTo relationship named '"+e+"' defined.")}a=sr(i,"hasData");n=sr(i,"inverseRecord");if(a){if(n&&!n.isDeleted()){if(t){o=sr(n,"id")}else{o=n.createSnapshot()}}else{o=null}}if(t){this._belongsToIds[e]=o}else{this._belongsToRelationships[e]=o}return o},hasMany:function(e,r){var t=r&&r.ids;var i,n,a;var o;if(t&&e in this._hasManyIds){return this._hasManyIds[e]}if(!t&&e in this._hasManyRelationships){return this._hasManyRelationships[e]}i=this._internalModel._relationships.get(e);if(!(i&&i.relationshipMeta.kind==="hasMany")){throw new Ember.Error("Model '"+Ember.inspect(this.record)+"' has no hasMany relationship named '"+e+"' defined.")}a=sr(i,"hasData");n=sr(i,"members");if(a){o=[];n.forEach(function(e){if(!e.isDeleted()){if(t){o.push(e.id)}else{o.push(e.createSnapshot())}}})}if(t){this._hasManyIds[e]=o}else{this._hasManyRelationships[e]=o}return o},eachAttribute:function(e,r){this.record.eachAttribute(e,r)},eachRelationship:function(e,r){this.record.eachRelationship(e,r)},serialize:function(e){return this.record.store.serializerFor(this.modelName).serialize(this,e)}};var or=dr;var ur=Rr;var lr=Ember.RSVP.Promise;var cr=Ember.get;var hr=Ember.set;var fr=Ember.copy;var pr=new v;var mr=new v;function vr(e){return mr[e]||(mr[e]=e.split("."))}function yr(e){return pr[e]||(pr[e]=vr(e)[0])}function br(e){return function(){return cr(this.currentState,e)}}var gr=0;function Rr(e,r,t,i,n){this.type=e;this.id=r;this.store=t;this._data=n||new v;this.modelName=e.modelName;this.dataHasInitialized=false;this._deferredTriggers=[];this._attributes=new v;this._inFlightAttributes=new v;this._relationships=new tr(this);this._recordArrays=undefined;this.currentState=Ve.empty;this.isReloading=false;this.isError=false;this.error=null;this.__ember_meta__=null;this[Ember.GUID_KEY]=gr++ +"internal-model";this._implicitRelationships=new v}Rr.prototype={isEmpty:br("isEmpty"),isLoading:br("isLoading"),isLoaded:br("isLoaded"),hasDirtyAttributes:br("hasDirtyAttributes"),isSaving:br("isSaving"),isDeleted:br("isDeleted"),isNew:br("isNew"),isValid:br("isValid"),dirtyType:br("dirtyType"),constructor:Rr,materializeRecord:function(){var e={store:this.store,_internalModel:this,id:this.id,currentState:cr(this,"currentState"),isError:this.isError,adapterError:this.error};if(Ember.setOwner){Ember.setOwner(e,se(this.store))}else{e.container=this.store.container}this.record=this.type._create(e);this._triggerDeferredTriggers()},recordObjectWillDestroy:function(){this.record=null},deleteRecord:function(){this.send("deleteRecord")},save:function(e){var r="DS: Model#save "+this;var t=Ember.RSVP.defer(r);this.store.scheduleSave(this,t,e);return t.promise},startedReloading:function(){this.isReloading=true;if(this.record){hr(this.record,"isReloading",true)}},finishedReloading:function(){this.isReloading=false;if(this.record){hr(this.record,"isReloading",false)}},reload:function(){this.startedReloading();var e=this;var r="DS: Model#reload of "+this;return new lr(function(r){e.send("reloadRecord",r)},r).then(function(){e.didCleanError();return e},function(r){e.didError(r);throw r},"DS: Model#reload complete, update flags")["finally"](function(){e.finishedReloading();e.updateRecordArrays()})},getRecord:function(){if(!this.record){this.materializeRecord()}return this.record},unloadRecord:function(){this.send("unloadRecord")},eachRelationship:function(e,r){return this.type.eachRelationship(e,r)},eachAttribute:function(e,r){return this.type.eachAttribute(e,r)},inverseFor:function(e){return this.type.inverseFor(e)},setupData:function(e){var r=this._changedKeys(e.attributes);De(this._data,e.attributes);this.pushedData();if(this.record){this.record._notifyProperties(r)}this.didInitalizeData()},becameReady:function(){Ember.run.schedule("actions",this.store.recordArrayManager,this.store.recordArrayManager.recordWasLoaded,this)},didInitalizeData:function(){if(!this.dataHasInitialized){this.becameReady();this.dataHasInitialized=true}},destroy:function(){if(this.record){return this.record.destroy()}},createSnapshot:function(e){var r=e&&e.adapterOptions;var t=new or(this);t.adapterOptions=r;return t},loadingData:function(e){this.send("loadingData",e)},loadedData:function(){this.send("loadedData");this.didInitalizeData()},notFound:function(){this.send("notFound")},pushedData:function(){this.send("pushedData")},flushChangedAttributes:function(){this._inFlightAttributes=this._attributes;this._attributes=new v},hasChangedAttributes:function(){return Object.keys(this._attributes).length>0},updateChangedAttributes:function(){var e=this.changedAttributes();var r=Object.keys(e);for(var t=0,i=r.length;t<i;t++){var n=r[t];var a=e[n];var o=a[0];var s=a[1];if(o===s){delete this._attributes[n]}}},changedAttributes:function(){var e=this._data;var r=this._attributes;var t=this._inFlightAttributes;var i=De(fr(t),r);var n=new v;var a=Object.keys(i);for(var o=0,s=a.length;o<s;o++){var d=a[o];n[d]=[e[d],i[d]]}return n},adapterWillCommit:function(){this.send("willCommit")},adapterDidDirty:function(){this.send("becomeDirty");this.updateRecordArraysLater()},send:function(e,r){var t=cr(this,"currentState");if(!t[e]){this._unhandledEvent(t,e,r)}return t[e](this,r)},notifyHasManyAdded:function(e,r,t){if(this.record){this.record.notifyHasManyAdded(e,r,t)}},notifyHasManyRemoved:function(e,r,t){if(this.record){this.record.notifyHasManyRemoved(e,r,t)}},notifyBelongsToChanged:function(e,r){if(this.record){this.record.notifyBelongsToChanged(e,r)}},notifyPropertyChange:function(e){if(this.record){this.record.notifyPropertyChange(e)}},rollbackAttributes:function(){var e=Object.keys(this._attributes);this._attributes=new v;if(cr(this,"isError")){this._inFlightAttributes=new v;this.didCleanError()}if(this.isDeleted()){this.becameReady()}if(this.isNew()){this.clearRelationships()}if(this.isValid()){this._inFlightAttributes=new v}this.send("rolledBack");this.record._notifyProperties(e)},transitionTo:function(e){var r=yr(e);var t=cr(this,"currentState");var i=t;do{if(i.exit){i.exit(this)}i=i.parentState}while(!i.hasOwnProperty(r));var n=vr(e);var a=[];var o=[];var s,d;for(s=0,d=n.length;s<d;s++){i=i[n[s]];if(i.enter){o.push(i)}if(i.setup){a.push(i)}}for(s=0,d=o.length;s<d;s++){o[s].enter(this)}hr(this,"currentState",i);if(this.record){hr(this.record,"currentState",i)}for(s=0,d=a.length;s<d;s++){a[s].setup(this)}this.updateRecordArraysLater()},_unhandledEvent:function(e,r,t){var i="Attempted to handle event `"+r+"` ";i+="on "+String(this)+" while in state ";i+=e.stateName+". ";if(t!==undefined){i+="Called with "+Ember.inspect(t)+"."}throw new Ember.Error(i)},triggerLater:function(){var e=arguments.length;var r=new Array(e);for(var t=0;t<e;t++){r[t]=arguments[t]}if(this._deferredTriggers.push(r)!==1){return}Ember.run.scheduleOnce("actions",this,"_triggerDeferredTriggers")},_triggerDeferredTriggers:function(){if(!this.record){return}for(var e=0,r=this._deferredTriggers.length;e<r;e++){this.record.trigger.apply(this.record,this._deferredTriggers[e])}this._deferredTriggers.length=0},clearRelationships:function(){var e=this;this.eachRelationship(function(r,t){if(e._relationships.has(r)){var i=e._relationships.get(r);i.clear();i.destroy()}});Object.keys(this._implicitRelationships).forEach(function(r){e._implicitRelationships[r].clear();e._implicitRelationships[r].destroy()})},_preloadData:function(e){var r=this;Object.keys(e).forEach(function(t){var i=cr(e,t);var n=r.type.metaForProperty(t);if(n.isRelationship){r._preloadRelationship(t,i)}else{r._data[t]=i}})},_preloadRelationship:function(e,r){var t=this.type.metaForProperty(e);var i=t.type;if(t.kind==="hasMany"){this._preloadHasMany(e,r,i)}else{this._preloadBelongsTo(e,r,i)}},_preloadHasMany:function(e,r,t){var i=this;var n=r.map(function(e){return i._convertStringOrNumberIntoInternalModel(e,t)});this._relationships.get(e).updateRecordsFromAdapter(n)},_preloadBelongsTo:function(e,r,t){var i=this._convertStringOrNumberIntoInternalModel(r,t);this._relationships.get(e).setRecord(i)},_convertStringOrNumberIntoInternalModel:function(e,r){if(typeof e==="string"||typeof e==="number"){return this.store._internalModelForId(r,e)}if(e._internalModel){return e._internalModel}return e},updateRecordArrays:function(){this._updatingRecordArraysLater=false;this.store.dataWasUpdated(this.type,this)},setId:function(e){this.id=e;if(this.record.get("id")!==e){this.record.set("id",e)}},didError:function(e){this.error=e;this.isError=true;if(this.record){this.record.setProperties({isError:true,adapterError:e})}},didCleanError:function(){this.error=null;this.isError=false;if(this.record){this.record.setProperties({isError:false,adapterError:null})}},adapterDidCommit:function(e){if(e){e=e.attributes}this.didCleanError();var r=this._changedKeys(e);De(this._data,this._inFlightAttributes);if(e){De(this._data,e)}this._inFlightAttributes=new v;this.send("didCommit");this.updateRecordArraysLater();if(!e){return}this.record._notifyProperties(r)},updateRecordArraysLater:function(){if(this._updatingRecordArraysLater){return}this._updatingRecordArraysLater=true;Ember.run.schedule("actions",this,this.updateRecordArrays)},addErrorMessageToAttribute:function(e,r){var t=this.getRecord();cr(t,"errors").add(e,r)},removeErrorMessageFromAttribute:function(e){var r=this.getRecord();cr(r,"errors").remove(e)},clearErrorMessages:function(){var e=this.getRecord();cr(e,"errors").clear()},adapterDidInvalidate:function(e){var r;for(r in e){if(e.hasOwnProperty(r)){this.addErrorMessageToAttribute(r,e[r])}}this.send("becameInvalid");this._saveWasRejected()},adapterDidError:function(e){this.send("becameError");this.didError(e);this._saveWasRejected()},_saveWasRejected:function(){var e=Object.keys(this._inFlightAttributes);for(var r=0;r<e.length;r++){if(this._attributes[e[r]]===undefined){this._attributes[e[r]]=this._inFlightAttributes[e[r]]}}this._inFlightAttributes=new v},_changedKeys:function(e){var r=[];if(e){var t,i,n,a;var o=Object.keys(e);var s=o.length;t=De(new v,this._data);t=De(t,this._inFlightAttributes);for(i=0;i<s;i++){a=o[i];n=e[a];if(this._attributes[a]!==undefined){continue}if(!Ember.isEqual(t[a],n)){r.push(a)}}}return r},toString:function(){if(this.record){return this.record.toString()}else{return"<"+this.modelName+":"+this.id+">"}}};var _r="`id` has to be non-empty string or number";var Er=Ember._Backburner||Ember.Backburner||Ember.__loader.require("backburner")["default"]||Ember.__loader.require("backburner")["Backburner"];var Fr=Ember.Map;if(!Er.prototype.join){var Ar=function(e){return typeof e==="string"};Er.prototype.join=function(){var e,r;if(this.currentInstance){var t=arguments.length;if(t===1){e=arguments[0];r=null}else{r=arguments[0];e=arguments[1]}if(Ar(e)){e=r[e]}if(t===1){return e()}else if(t===2){return e.call(r)}else{var i=new Array(t-2);for(var n=0,a=t-2;n<a;n++){i[n]=arguments[n+2]}return e.apply(r,i)}}else{return this.run.apply(this,arguments)}}}function Mr(e,r){var t=e.then(function(e){return e.getRecord()});return L(t,r)}var zr=Ember.get;var kr=Ember.set;var Sr=Ember.run.once;var Tr=Ember.isNone;var wr=Ember.RSVP.Promise;var Cr=Ember.copy;var Dr;var Or=Ember.Service;if(!Or){Or=Ember.Object}Dr=Or.extend({init:function(){this._super.apply(this,arguments);this._backburner=new Er(["normalizeRelationships","syncRelationships","finished"]);this.typeMaps={};this.recordArrayManager=ke.create({store:this});this._pendingSave=[];this._instanceCache=new we(se(this));this._pendingFetch=Fr.create()},adapter:"-json-api",serialize:function(e,r){var t=e._internalModel.createSnapshot();return t.serialize(r)},defaultAdapter:Ember.computed("adapter",function(){var e=zr(this,"adapter");e=this.retrieveManagedInstance("adapter",e);return e}),createRecord:function(e,r){var t=this.modelFor(e);var i=Cr(r)||new v;if(Tr(i.id)){i.id=this._generateId(e,i)}i.id=de(i.id);var n=this.buildInternalModel(t,i.id);var a=n.getRecord();n.loadedData();a.setProperties(i);n.eachRelationship(function(e,r){n._relationships.get(e).setHasData(true)});return a},_generateId:function(e,r){var t=this.adapterFor(e);if(t&&t.generateIdForRecord){return t.generateIdForRecord(this,e,r)}return null},deleteRecord:function(e){e.deleteRecord()},unloadRecord:function(e){e.unloadRecord()},find:function(e,r,t){if(arguments.length===1){}if(Ember.typeOf(r)==="object"){}if(t){}return this.findRecord(e,r)},findRecord:function(e,r,t){var i=this._internalModelForId(e,r);t=t||{};if(!this.hasRecordForId(e,r)){return this._findByInternalModel(i,t)}var n=this._findRecord(i,t);return Mr(n,"DS: Store#findRecord "+i.typeKey+" with id: "+zr(i,"id"))},_findRecord:function(e,r){if(r.reload){return this.scheduleFetch(e,r)}var t=e.createSnapshot();t.adapterOptions=r&&r.adapterOptions;var i=e.type;var n=this.adapterFor(i.modelName);if(n.shouldReloadRecord(this,t)){return this.scheduleFetch(e,r)}if(n.shouldBackgroundReloadRecord(this,t)){this.scheduleFetch(e,r)}return wr.resolve(e)},_findByInternalModel:function(e,r){r=r||{};if(r.preload){e._preloadData(r.preload)}var t=this._findEmptyInternalModel(e,r);return Mr(t,"DS: Store#findRecord "+e.typeKey+" with id: "+zr(e,"id"))},_findEmptyInternalModel:function(e,r){if(e.isEmpty()){return this.scheduleFetch(e,r)}if(e.isLoading()){return e._loadingPromise}return wr.resolve(e)},findByIds:function(e,r){var t=this;return x(Ember.RSVP.all(r.map(function(r){return t.findRecord(e,r)})).then(Ember.A,null,"DS: Store#findByIds of "+e+" complete"))},fetchRecord:function(e,r){var t=e.type;var i=e.id;var n=this.adapterFor(t.modelName);var a=J(n,this,t,i,e,r);return a},scheduleFetchMany:function(e){var r=e.map(function(e){return e._internalModel});return wr.all(r.map(this.scheduleFetch,this))},scheduleFetch:function(e,r){var t=e.type;if(e._loadingPromise){return e._loadingPromise}var i=Ember.RSVP.defer("Fetching "+t+"with id: "+e.id);var n={record:e,resolver:i,options:r};var a=i.promise;e.loadingData(a);if(!this._pendingFetch.get(t)){this._pendingFetch.set(t,[n])}else{this._pendingFetch.get(t).push(n)}Ember.run.scheduleOnce("afterRender",this,this.flushAllPendingFetches);return a},flushAllPendingFetches:function(){if(this.isDestroyed||this.isDestroying){return}this._pendingFetch.forEach(this._flushPendingFetchForType,this);this._pendingFetch=Fr.create()},_flushPendingFetchForType:function(e,r){var t=this;var i=t.adapterFor(r.modelName);var n=!!i.findMany&&i.coalesceFindRequests;var a=Ember.A(e).mapBy("record");function o(e){e.resolver.resolve(t.fetchRecord(e.record,e.options))}function s(r){r.forEach(function(r){var t=Ember.A(e).findBy("record",r);if(t){var i=t.resolver;i.resolve(r)}});return r}function d(e){return function r(t){t=Ember.A(t);var i=e.reject(function(e){return t.contains(e)});if(i.length){}l(i)}}function u(e){return function(r){l(e,r)}}function l(r,t){r.forEach(function(r){var i=Ember.A(e).findBy("record",r);if(i){var n=i.resolver;n.reject(t)}})}if(e.length===1){o(e[0])}else if(n){var c=Ember.A(a).invoke("createSnapshot");var h=i.groupRecordsForFindMany(this,c);h.forEach(function(n){var a=Ember.A(n).mapBy("_internalModel");var l=Ember.A(a);var c=l.mapBy("id");if(c.length>1){Y(i,t,r,c,l).then(s).then(d(l)).then(null,u(l))}else if(c.length===1){var h=Ember.A(e).findBy("record",a[0]);o(h)}else{}})}else{e.forEach(o)}},peekRecord:function(e,r){if(this.hasRecordForId(e,r)){return this._internalModelForId(e,r).getRecord()}else{return null}},reloadRecord:function(e){var r=e.type.modelName;var t=this.adapterFor(r);var i=e.id;return this.scheduleFetch(e)},hasRecordForId:function(e,r){var t=this.modelFor(e);var i=de(r);var n=this.typeMapFor(t).idToRecord[i];return!!n&&n.isLoaded()},recordForId:function(e,r){return this._internalModelForId(e,r).getRecord()},_internalModelForId:function(e,r){var t=this.modelFor(e);var i=de(r);var n=this.typeMapFor(t).idToRecord;var a=n[i];if(!a||!n[i]){a=this.buildInternalModel(t,i)}return a},findMany:function(e){var r=this;return wr.all(e.map(function(e){return r._findByInternalModel(e)}))},findHasMany:function(e,r,t){var i=this.adapterFor(e.type.modelName);return X(i,this,e,r,t)},findBelongsTo:function(e,r,t){var i=this.adapterFor(e.type.modelName);return Z(i,this,e,r,t)},query:function(e,r){var t=this.modelFor(e);var i=this.recordArrayManager.createAdapterPopulatedRecordArray(t,r);var n=this.adapterFor(e);return x(re(n,this,t,r,i))},queryRecord:function(e,r){var t=this.modelFor(e);var i=this.adapterFor(e);return L(te(i,this,t,r))},findAll:function(e,r){var t=this.modelFor(e);return this._fetchAll(t,this.peekAll(e),r)},_fetchAll:function(e,r,t){t=t||{};var i=this.adapterFor(e.modelName);var n=this.typeMapFor(e).metadata.since;kr(r,"isUpdating",true);if(t.reload){return x(ee(i,this,e,n,t))}var a=r.createSnapshot(t);if(i.shouldReloadAll(this,a)){return x(ee(i,this,e,n,t))}if(i.shouldBackgroundReloadAll(this,a)){x(ee(i,this,e,n,t))}return x(wr.resolve(r))},didUpdateAll:function(e){var r=this.recordArrayManager.liveRecordArrayFor(e);kr(r,"isUpdating",false)},peekAll:function(e){var r=this.modelFor(e);var t=this.recordArrayManager.liveRecordArrayFor(r);this.recordArrayManager.populateLiveRecordArray(t,r);return t},unloadAll:function(e){if(arguments.length===0){var r=this.typeMaps;var t=Object.keys(r);var i=t.map(u);i.forEach(this.unloadAll,this)}else{var n=this.modelFor(e);var a=this.typeMapFor(n);var o=a.records.slice();var s;for(var d=0;d<o.length;d++){s=o[d];s.unloadRecord();s.destroy()}a.metadata=new v}function u(e){return r[e]["type"].modelName}},filter:function(e,r,t){if(!Ember.ENV.ENABLE_DS_FILTER){}var i;var n=arguments.length;var a;var o=n===3;if(o){i=this.query(e,r)}else if(arguments.length===2){t=r}e=this.modelFor(e);if(o){a=this.recordArrayManager.createFilteredRecordArray(e,t,r)}else{a=this.recordArrayManager.createFilteredRecordArray(e,t)}i=i||wr.resolve(a);return x(i.then(function(){return a},null,"DS: Store#filter of "+e))},recordIsLoaded:function(e,r){return this.hasRecordForId(e,r)},_metadataFor:function(e){var r=this.modelFor(e);return this.typeMapFor(r).metadata},_setMetadataFor:function(e,r){var t=this.modelFor(e);Ember.merge(this.typeMapFor(t).metadata,r)},dataWasUpdated:function(e,r){this.recordArrayManager.recordDidChange(r)},scheduleSave:function(e,r,t){var i=e.createSnapshot(t);e.flushChangedAttributes();e.adapterWillCommit();this._pendingSave.push({snapshot:i,resolver:r});Sr(this,"flushPendingSave")},flushPendingSave:function(){var e=this;var r=this._pendingSave.slice();this._pendingSave=[];r.forEach(function(r){var t=r.snapshot;var i=r.resolver;var n=t._internalModel;var a=e.adapterFor(n.type.modelName);var o;if(zr(n,"currentState.stateName")==="root.deleted.saved"){return i.resolve()}else if(n.isNew()){o="createRecord"}else if(n.isDeleted()){o="deleteRecord"}else{o="updateRecord"}i.resolve(xr(a,e,o,t))})},didSaveRecord:function(e,r){var t;if(r){t=r.data}if(t){this._backburner.schedule("normalizeRelationships",this,"_setupRelationships",e,e.type,t);this.updateId(e,t)}e.adapterDidCommit(t)},recordWasInvalid:function(e,r){e.adapterDidInvalidate(r)},recordWasError:function(e,r){e.adapterDidError(r)},updateId:function(e,r){var t=e.id;var i=de(r.id);this.typeMapFor(e.type).idToRecord[i]=e;e.setId(i)},typeMapFor:function(e){var r=zr(this,"typeMaps");var t=Ember.guidFor(e);var i=r[t];if(i){return i}i={idToRecord:new v,records:[],metadata:new v,type:e};r[t]=i;return i},_load:function(e){var r=de(e.id);var t=this._internalModelForId(e.type,r);t.setupData(e);this.recordArrayManager.recordDidChange(t);return t},_modelForMixin:function(e){var r=C(e);var t=se(this);var i=t._lookupFactory("mixin:"+r);if(i){t.register("model:"+r,DS.Model.extend(i))}var n=this.modelFactoryFor(r);if(n){n.__isMixin=true;n.__mixin=i}return n},modelFor:function(e){var r=this.modelFactoryFor(e);if(!r){r=this._modelForMixin(e)}if(!r){throw new Ember.Error("No model was found for '"+e+"'")}r.modelName=r.modelName||C(e);return r},modelFactoryFor:function(e){var r=C(e);var t=se(this);return t._lookupFactory("model:"+r)},push:function(e){var r=this;if(e.included){e.included.forEach(function(e){return r._pushInternalModel(e)})}if(Ember.typeOf(e.data)==="array"){var t=e.data.map(function(e){return r._pushInternalModel(e)});return t.map(function(e){return e.getRecord()})}if(e.data===null){return null}var i=this._pushInternalModel(e.data);return i.getRecord()},_hasModelFor:function(e){return se(this)._lookupFactory("model:"+e)},_pushInternalModel:function(e){var r=this;var t=e.type;var i=this.modelFor(t);if(Ember.ENV.DS_WARN_ON_UNKNOWN_KEYS){}var n=this._load(e);this._backburner.join(function(){r._backburner.schedule("normalizeRelationships",r,"_setupRelationships",n,i,e)});return n},_setupRelationships:function(e,r,t){t=Pr(this,r,t);$r(this,e,t)},pushPayload:function(e,r){var t=this;var i;var n;if(!r){n=e;i=Lr(this)}else{n=r;i=this.serializerFor(e)}this._adapterRun(function(){return i.pushPayload(t,n)})},normalize:function(e,r){var t=this.serializerFor(e);var i=this.modelFor(e);return t.normalize(i,r)},buildInternalModel:function(e,r,t){var i=this.typeMapFor(e);
var n=i.idToRecord;var a=new ur(e,r,this,null,t);if(r){n[r]=a}i.records.push(a);return a},recordWasLoaded:function(e){this.recordArrayManager.recordWasLoaded(e)},_dematerializeRecord:function(e){var r=e.type;var t=this.typeMapFor(r);var i=e.id;e.updateRecordArrays();if(i){delete t.idToRecord[i]}var n=t.records.indexOf(e);t.records.splice(n,1)},adapterFor:function(e){return this.lookupAdapter(e)},_adapterRun:function(e){return this._backburner.run(e)},serializerFor:function(e){var r=["application",this.adapterFor(e).get("defaultSerializer"),"-default"];var t=this.lookupSerializer(e,r);return t},retrieveManagedInstance:function(e,r,t){var i=C(r);var n=this._instanceCache.get(e,i,t);kr(n,"store",this);return n},lookupAdapter:function(e){return this.retrieveManagedInstance("adapter",e,this.get("_adapterFallbacks"))},_adapterFallbacks:Ember.computed("adapter",function(){var e=this.get("adapter");return["application",e,"-json-api"]}),lookupSerializer:function(e,r){return this.retrieveManagedInstance("serializer",e,r)},willDestroy:function(){this._super.apply(this,arguments);this.recordArrayManager.destroy();this.unloadAll();for(var e in this._containerCache){this._containerCache[e].destroy();delete this._containerCache[e]}delete this._containerCache}});function Pr(e,r,t,i){t.relationships=t.relationships||{};r.eachRelationship(function(r,i){var n=i.kind;var a;if(t.relationships[r]&&t.relationships[r].data){a=t.relationships[r].data;if(n==="belongsTo"){t.relationships[r].data=Ir(e,r,i,a)}else if(n==="hasMany"){t.relationships[r].data=Nr(e,r,i,a)}}});return t}function Ir(e,r,t,i){if(Tr(i)){return}return e._internalModelForId(i.type,i.id)}function Nr(e,r,t,i){if(Tr(i)){return}return i.map(function(i){return Ir(e,r,t,i)})}function Lr(e){return e.serializerFor("application")}function xr(e,r,t,i){var n=i._internalModel;var a=i.modelName;var o=r.modelFor(a);var s=e[t](r,o,i);var u=Q(r,e,a);var l="DS: Extract and notify about "+t+" completion of "+n;s=wr.resolve(s,l);s=U(s,B(V,r));s=U(s,B(V,n));return s.then(function(e){r._adapterRun(function(){var a,s;if(e){a=W(u,r,o,e,i.id,t);if(a.included){r.push({data:a.included})}s=a.data}r.didSaveRecord(n,{data:s})});return n},function(e){if(e instanceof d){var t=u.extractErrors(r,o,e,i.id);r.recordWasInvalid(n,t)}else{r.recordWasError(n,e)}throw e},l)}function $r(e,r,t){var i=r.type;if(!t.relationships){return}i.eachRelationship(function(e,i){var n=i.kind;if(!t.relationships[e]){return}var a;if(t.relationships[e].links&&t.relationships[e].links.related){var o=T(t.relationships[e].links.related);if(o&&o.href){a=r._relationships.get(e);a.updateLink(o.href)}}if(t.relationships[e].meta){a=r._relationships.get(e);a.updateMeta(t.relationships[e].meta)}var s=t.relationships[e].data;if(s!==undefined){if(n==="belongsTo"){a=r._relationships.get(e);a.setCanonicalRecord(s)}else if(n==="hasMany"){a=r._relationships.get(e);a.updateRecordsFromAdapter(s)}}})}var jr=Dr;var Kr=Ember.Object.extend({normalizeResponse:null,serialize:null,normalize:function(e,r){return r}});var Hr=Ember.get;var Br=Ember.isNone;var Ur=Ember.merge;var Vr=Kr.extend({primaryKey:"id",mergedProperties:["attrs"],applyTransforms:function(e,r){var t=this;e.eachTransformedAttribute(function(e,i){if(!r.hasOwnProperty(e)){return}var n=t.transformFor(i);r[e]=n.deserialize(r[e])});return r},normalizeResponse:function(e,r,t,i,n){switch(n){case"findRecord":return this.normalizeFindRecordResponse.apply(this,arguments);case"queryRecord":return this.normalizeQueryRecordResponse.apply(this,arguments);case"findAll":return this.normalizeFindAllResponse.apply(this,arguments);case"findBelongsTo":return this.normalizeFindBelongsToResponse.apply(this,arguments);case"findHasMany":return this.normalizeFindHasManyResponse.apply(this,arguments);case"findMany":return this.normalizeFindManyResponse.apply(this,arguments);case"query":return this.normalizeQueryResponse.apply(this,arguments);case"createRecord":return this.normalizeCreateRecordResponse.apply(this,arguments);case"deleteRecord":return this.normalizeDeleteRecordResponse.apply(this,arguments);case"updateRecord":return this.normalizeUpdateRecordResponse.apply(this,arguments)}},normalizeFindRecordResponse:function(e,r,t,i,n){return this.normalizeSingleResponse.apply(this,arguments)},normalizeQueryRecordResponse:function(e,r,t,i,n){return this.normalizeSingleResponse.apply(this,arguments)},normalizeFindAllResponse:function(e,r,t,i,n){return this.normalizeArrayResponse.apply(this,arguments)},normalizeFindBelongsToResponse:function(e,r,t,i,n){return this.normalizeSingleResponse.apply(this,arguments)},normalizeFindHasManyResponse:function(e,r,t,i,n){return this.normalizeArrayResponse.apply(this,arguments)},normalizeFindManyResponse:function(e,r,t,i,n){return this.normalizeArrayResponse.apply(this,arguments)},normalizeQueryResponse:function(e,r,t,i,n){return this.normalizeArrayResponse.apply(this,arguments)},normalizeCreateRecordResponse:function(e,r,t,i,n){return this.normalizeSaveResponse.apply(this,arguments)},normalizeDeleteRecordResponse:function(e,r,t,i,n){return this.normalizeSaveResponse.apply(this,arguments)},normalizeUpdateRecordResponse:function(e,r,t,i,n){return this.normalizeSaveResponse.apply(this,arguments)},normalizeSaveResponse:function(e,r,t,i,n){return this.normalizeSingleResponse.apply(this,arguments)},normalizeSingleResponse:function(e,r,t,i,n){return this._normalizeResponse(e,r,t,i,n,true)},normalizeArrayResponse:function(e,r,t,i,n){return this._normalizeResponse(e,r,t,i,n,false)},_normalizeResponse:function(e,r,t,i,n,a){var o=this;var s={data:null,included:[]};var d=this.extractMeta(e,r,t);if(d){s.meta=d}if(a){var u=this.normalize(r,t);var l=u.data;var c=u.included;s.data=l;if(c){s.included=c}}else{s.data=t.map(function(e){var t=o.normalize(r,e);var i=t.data;var n=t.included;if(n){var a;(a=s.included).push.apply(a,n)}return i})}return s},normalize:function(e,r){var t=null;if(r){this.normalizeUsingDeclaredMapping(e,r);t={id:this.extractId(e,r),type:e.modelName,attributes:this.extractAttributes(e,r),relationships:this.extractRelationships(e,r)};this.applyTransforms(e,t.attributes)}return{data:t}},extractId:function(e,r){var t=Hr(this,"primaryKey");var i=r[t];return de(i)},extractAttributes:function(e,r){var t=this;var i;var n={};e.eachAttribute(function(e){i=t.keyForAttribute(e,"deserialize");if(r.hasOwnProperty(i)){n[e]=r[i]}});return n},extractRelationship:function(e,r){if(Ember.isNone(r)){return null}if(Ember.typeOf(r)==="object"){if(r.id){r.id=de(r.id)}var t=this.store.modelFor(e);if(r.type&&!oe(t)){r.type=this.modelNameFromPayloadKey(r.type)}return r}return{id:de(r),type:e}},extractPolymorphicRelationship:function(e,r,t){return this.extractRelationship(e,r)},extractRelationships:function(e,r){var t=this;var i={};e.eachRelationship(function(e,n){var a=null;var o=t.keyForRelationship(e,n.kind,"deserialize");if(r.hasOwnProperty(o)){var s=null;var d=r[o];if(n.kind==="belongsTo"){if(n.options.polymorphic){s=t.extractPolymorphicRelationship(n.type,d,{key:e,resourceHash:r,relationshipMeta:n})}else{s=t.extractRelationship(n.type,d)}}else if(n.kind==="hasMany"){s=Ember.isNone(d)?null:d.map(function(e){return t.extractRelationship(n.type,e)})}a={data:s}}var u=t.keyForLink(e,n.kind);if(r.links&&r.links.hasOwnProperty(u)){var l=r.links[u];a=a||{};a.links={related:l}}if(a){i[e]=a}});return i},modelNameFromPayloadKey:function(e){return C(e)},normalizeAttributes:function(e,r){var t=this;var i;if(this.keyForAttribute){e.eachAttribute(function(e){i=t.keyForAttribute(e,"deserialize");if(e===i){return}if(!r.hasOwnProperty(i)){return}r[e]=r[i];delete r[i]})}},normalizeRelationships:function(e,r){var t=this;var i;if(this.keyForRelationship){e.eachRelationship(function(e,n){i=t.keyForRelationship(e,n.kind,"deserialize");if(e===i){return}if(!r.hasOwnProperty(i)){return}r[e]=r[i];delete r[i]})}},normalizeUsingDeclaredMapping:function(e,r){var t=Hr(this,"attrs");var i,n,a;if(t){for(a in t){i=this._getMappedKey(a,e);if(!r.hasOwnProperty(i)){continue}if(Hr(e,"attributes").has(a)){n=this.keyForAttribute(a)}if(Hr(e,"relationshipsByName").has(a)){n=this.keyForRelationship(a)}if(i!==n){r[n]=r[i];delete r[i]}}}},normalizeId:function(e){var r=Hr(this,"primaryKey");if(r==="id"){return}e.id=e[r];delete e[r]},_getMappedKey:function(e,r){var t=Hr(this,"attrs");var i;if(t&&t[e]){i=t[e];if(i.key){i=i.key}if(typeof i==="string"){e=i}}return e},_canSerialize:function(e){var r=Hr(this,"attrs");return!r||!r[e]||r[e].serialize!==false},_mustSerialize:function(e){var r=Hr(this,"attrs");return r&&r[e]&&r[e].serialize===true},_shouldSerializeHasMany:function(e,r,t){var i=e.type.determineRelationshipType(t,this.store);if(this._mustSerialize(r)){return true}return this._canSerialize(r)&&(i==="manyToNone"||i==="manyToMany")},serialize:function(e,r){var t=this;var i={};if(r&&r.includeId){var n=e.id;if(n){i[Hr(this,"primaryKey")]=n}}e.eachAttribute(function(r,n){t.serializeAttribute(e,i,r,n)});e.eachRelationship(function(r,n){if(n.kind==="belongsTo"){t.serializeBelongsTo(e,i,n)}else if(n.kind==="hasMany"){t.serializeHasMany(e,i,n)}});return i},serializeIntoHash:function(e,r,t,i){Ur(e,this.serialize(t,i))},serializeAttribute:function(e,r,t,i){var n=i.type;if(this._canSerialize(t)){var a=e.attr(t);if(n){var o=this.transformFor(n);a=o.serialize(a)}var s=this._getMappedKey(t,e.type);if(s===t&&this.keyForAttribute){s=this.keyForAttribute(t,"serialize")}r[s]=a}},serializeBelongsTo:function(e,r,t){var i=t.key;if(this._canSerialize(i)){var n=e.belongsTo(i,{id:true});var a=this._getMappedKey(i,e.type);if(a===i&&this.keyForRelationship){a=this.keyForRelationship(i,"belongsTo","serialize")}if(Br(n)){r[a]=null}else{r[a]=n}if(t.options.polymorphic){this.serializePolymorphicType(e,r,t)}}},serializeHasMany:function(e,r,t){var i=t.key;if(this._shouldSerializeHasMany(e,i,t)){var n=e.hasMany(i,{ids:true});if(n!==undefined){var a=this._getMappedKey(i,e.type);if(a===i&&this.keyForRelationship){a=this.keyForRelationship(i,"hasMany","serialize")}r[a]=n}}},serializePolymorphicType:Ember.K,extractMeta:function(e,r,t){if(t&&t.hasOwnProperty("meta")){var i=t.meta;delete t.meta;return i}},extractErrors:function(e,r,t,i){var n=this;if(t&&typeof t==="object"&&t.errors){t=h(t.errors);this.normalizeUsingDeclaredMapping(r,t);r.eachAttribute(function(e){var r=n.keyForAttribute(e,"deserialize");if(r!==e&&t.hasOwnProperty(r)){t[e]=t[r];delete t[r]}});r.eachRelationship(function(e){var r=n.keyForRelationship(e,"deserialize");if(r!==e&&t.hasOwnProperty(r)){t[e]=t[r];delete t[r]}})}return t},keyForAttribute:function(e,r){return e},keyForRelationship:function(e,r,t){return e},keyForLink:function(e,r){return e},transformFor:function(e,r){var t=se(this).lookup("transform:"+e);return t}});var qr=Vr;var Wr=e.String.capitalize;var Qr=/^\s*$/;var Gr=/([\w/-]+[_/\s-])([a-z\d]+$)/;var Jr=/([\w/\s-]+)([A-Z][a-z\d]*$)/;var Yr=/[A-Z][a-z\d]*$/;function Xr(e,r){for(var t=0,i=r.length;t<i;t++){e.uncountable[r[t].toLowerCase()]=true}}function Zr(e,r){var t;for(var i=0,n=r.length;i<n;i++){t=r[i];e.irregular[t[0].toLowerCase()]=t[1];e.irregular[t[1].toLowerCase()]=t[1];e.irregularInverse[t[1].toLowerCase()]=t[0];e.irregularInverse[t[0].toLowerCase()]=t[0]}}function et(e){e=e||{};e.uncountable=e.uncountable||rt();e.irregularPairs=e.irregularPairs||rt();var r=this.rules={plurals:e.plurals||[],singular:e.singular||[],irregular:rt(),irregularInverse:rt(),uncountable:rt()};Xr(r,e.uncountable);Zr(r,e.irregularPairs);this.enableCache()}if(!Object.create&&!Object.create(null).hasOwnProperty){throw new Error("This browser does not support Object.create(null), please polyfil with es5-sham: http://git.io/yBU2rg")}function rt(){var e=Object.create(null);e["_dict"]=null;delete e["_dict"];return e}et.prototype={enableCache:function(){this.purgeCache();this.singularize=function(e){this._cacheUsed=true;return this._sCache[e]||(this._sCache[e]=this._singularize(e))};this.pluralize=function(e){this._cacheUsed=true;return this._pCache[e]||(this._pCache[e]=this._pluralize(e))}},purgeCache:function(){this._cacheUsed=false;this._sCache=rt();this._pCache=rt()},disableCache:function(){this._sCache=null;this._pCache=null;this.singularize=function(e){return this._singularize(e)};this.pluralize=function(e){return this._pluralize(e)}},plural:function(e,r){if(this._cacheUsed){this.purgeCache()}this.rules.plurals.push([e,r.toLowerCase()])},singular:function(e,r){if(this._cacheUsed){this.purgeCache()}this.rules.singular.push([e,r.toLowerCase()])},uncountable:function(e){if(this._cacheUsed){this.purgeCache()}Xr(this.rules,[e.toLowerCase()])},irregular:function(e,r){if(this._cacheUsed){this.purgeCache()}Zr(this.rules,[[e,r]])},pluralize:function(e){return this._pluralize(e)},_pluralize:function(e){return this.inflect(e,this.rules.plurals,this.rules.irregular)},singularize:function(e){return this._singularize(e)},_singularize:function(e){return this.inflect(e,this.rules.singular,this.rules.irregularInverse)},inflect:function(e,r,t){var i,n,a,o,s,d,u,l,c,h,f;l=!e||Qr.test(e);c=Yr.test(e);d="";if(l){return e}o=e.toLowerCase();s=Gr.exec(e)||Jr.exec(e);if(s){d=s[1];u=s[2].toLowerCase()}f=this.rules.uncountable[o]||this.rules.uncountable[u];if(f){return e}for(h in this.rules.irregular){if(o.match(h+"$")){n=t[h];if(c&&t[u]){n=Wr(n);h=Wr(h)}return e.replace(h,n)}}for(var p=r.length,m=0;p>m;p--){i=r[p-1];h=i[0];if(h.test(e)){break}}i=i||[];h=i[0];n=i[1];a=e.replace(h,n);return a}};var tt=et;function it(e){return tt.inflector.pluralize(e)}function nt(e){return tt.inflector.singularize(e)}var at={plurals:[[/$/,"s"],[/s$/i,"s"],[/^(ax|test)is$/i,"$1es"],[/(octop|vir)us$/i,"$1i"],[/(octop|vir)i$/i,"$1i"],[/(alias|status)$/i,"$1es"],[/(bu)s$/i,"$1ses"],[/(buffal|tomat)o$/i,"$1oes"],[/([ti])um$/i,"$1a"],[/([ti])a$/i,"$1a"],[/sis$/i,"ses"],[/(?:([^f])fe|([lr])f)$/i,"$1$2ves"],[/(hive)$/i,"$1s"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(x|ch|ss|sh)$/i,"$1es"],[/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"],[/^(m|l)ouse$/i,"$1ice"],[/^(m|l)ice$/i,"$1ice"],[/^(ox)$/i,"$1en"],[/^(oxen)$/i,"$1"],[/(quiz)$/i,"$1zes"]],singular:[[/s$/i,""],[/(ss)$/i,"$1"],[/(n)ews$/i,"$1ews"],[/([ti])a$/i,"$1um"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(sis|ses)$/i,"$1sis"],[/(^analy)(sis|ses)$/i,"$1sis"],[/([^f])ves$/i,"$1fe"],[/(hive)s$/i,"$1"],[/(tive)s$/i,"$1"],[/([lr])ves$/i,"$1f"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/(s)eries$/i,"$1eries"],[/(m)ovies$/i,"$1ovie"],[/(x|ch|ss|sh)es$/i,"$1"],[/^(m|l)ice$/i,"$1ouse"],[/(bus)(es)?$/i,"$1"],[/(o)es$/i,"$1"],[/(shoe)s$/i,"$1"],[/(cris|test)(is|es)$/i,"$1is"],[/^(a)x[ie]s$/i,"$1xis"],[/(octop|vir)(us|i)$/i,"$1us"],[/(alias|status)(es)?$/i,"$1"],[/^(ox)en/i,"$1"],[/(vert|ind)ices$/i,"$1ex"],[/(matr)ices$/i,"$1ix"],[/(quiz)zes$/i,"$1"],[/(database)s$/i,"$1"]],irregularPairs:[["person","people"],["man","men"],["child","children"],["sex","sexes"],["move","moves"],["cow","kine"],["zombie","zombies"]],uncountable:["equipment","information","rice","money","species","series","fish","sheep","jeans","police"]};tt.inflector=new tt(at);if(e.EXTEND_PROTOTYPES===true||e.EXTEND_PROTOTYPES.String){String.prototype.pluralize=function(){return it(this)};String.prototype.singularize=function(){return nt(this)}}tt.defaultRules=at;e.Inflector=tt;e.String.pluralize=it;e.String.singularize=nt;var ot=tt;if(typeof define!=="undefined"&&define.amd){define("ember-inflector",["exports"],function(e){e["default"]=tt;return tt})}else if(typeof module!=="undefined"&&module["exports"]){module["exports"]=tt}var st=Ember.String.dasherize;var dt=qr.extend({_normalizeDocumentHelper:function(e){if(Ember.typeOf(e.data)==="object"){e.data=this._normalizeResourceHelper(e.data)}else if(Ember.typeOf(e.data)==="array"){e.data=e.data.map(this._normalizeResourceHelper,this)}if(Ember.typeOf(e.included)==="array"){e.included=e.included.map(this._normalizeResourceHelper,this)}return e},_normalizeRelationshipDataHelper:function(e){var r=this.modelNameFromPayloadKey(e.type);e.type=r;return e},_normalizeResourceHelper:function(e){var r=this.modelNameFromPayloadKey(e.type);if(!this.store._hasModelFor(r)){return null}var t=this.store.modelFor(r);var i=this.store.serializerFor(r);var n=i.normalize(t,e);var a=n.data;return a},pushPayload:function(e,r){var t=this._normalizeDocumentHelper(r);e.push(t)},_normalizeResponse:function(e,r,t,i,n,a){var o=this._normalizeDocumentHelper(t);return o},extractAttributes:function(e,r){var t=this;var i={};if(r.attributes){e.eachAttribute(function(e){var n=t.keyForAttribute(e,"deserialize");if(r.attributes.hasOwnProperty(n)){i[e]=r.attributes[n]}})}return i},extractRelationship:function(e){if(Ember.typeOf(e.data)==="object"){e.data=this._normalizeRelationshipDataHelper(e.data)}if(Ember.typeOf(e.data)==="array"){e.data=e.data.map(this._normalizeRelationshipDataHelper,this)}return e},extractRelationships:function(e,r){var t=this;var i={};if(r.relationships){e.eachRelationship(function(e,n){var a=t.keyForRelationship(e,n.kind,"deserialize");if(r.relationships.hasOwnProperty(a)){var o=r.relationships[a];i[e]=t.extractRelationship(o)}})}return i},_extractType:function(e,r){return this.modelNameFromPayloadKey(r.type)},modelNameFromPayloadKey:function(e){return nt(C(e))},payloadKeyFromModelName:function(e){return it(e)},normalize:function(e,r){if(r.attributes){this.normalizeUsingDeclaredMapping(e,r.attributes)}if(r.relationships){this.normalizeUsingDeclaredMapping(e,r.relationships)}var t={id:this.extractId(e,r),type:this._extractType(e,r),attributes:this.extractAttributes(e,r),relationships:this.extractRelationships(e,r)};this.applyTransforms(e,t.attributes);return{data:t}},keyForAttribute:function(e,r){return st(e)},keyForRelationship:function(e,r,t){return st(e)},serialize:function(e,r){var t=this._super.apply(this,arguments);t.type=this.payloadKeyFromModelName(e.modelName);return{data:t}},serializeAttribute:function(e,r,t,i){var n=i.type;if(this._canSerialize(t)){r.attributes=r.attributes||{};var a=e.attr(t);if(n){var o=this.transformFor(n);a=o.serialize(a)}var s=this._getMappedKey(t,e.type);if(s===t){s=this.keyForAttribute(t,"serialize")}r.attributes[s]=a}},serializeBelongsTo:function(e,r,t){var i=t.key;if(this._canSerialize(i)){var n=e.belongsTo(i);if(n!==undefined){r.relationships=r.relationships||{};var a=this._getMappedKey(i,e.type);if(a===i){a=this.keyForRelationship(i,"belongsTo","serialize")}var o=null;if(n){o={type:this.payloadKeyFromModelName(n.modelName),id:n.id}}r.relationships[a]={data:o}}}},serializeHasMany:function(e,r,t){var i=this;var n=t.key;if(this._shouldSerializeHasMany(e,n,t)){var a=e.hasMany(n);if(a!==undefined){r.relationships=r.relationships||{};var o=this._getMappedKey(n,e.type);if(o===n&&this.keyForRelationship){o=this.keyForRelationship(n,"hasMany","serialize")}var s=a.map(function(e){return{type:i.payloadKeyFromModelName(e.modelName),id:e.id}});r.relationships[o]={data:s}}}}});var ut=dt;var lt=Ember.String.camelize;var ct=qr.extend({keyForPolymorphicType:function(e,r,t){var i=this.keyForRelationship(e);return i+"Type"},normalize:function(e,r,t){if(this.normalizeHash&&this.normalizeHash[t]){this.normalizeHash[t](r)}return this._super(e,r,t)},_normalizeArray:function(e,r,t,i){var n=this;var a={data:[],included:[]};var o=e.modelFor(r);var s=e.serializerFor(r);t.forEach(function(r){var t=n._normalizePolymorphicRecord(e,r,i,o,s);var d=t.data;var u=t.included;a.data.push(d);if(u){var l;(l=a.included).push.apply(l,u)}});return a},_normalizePolymorphicRecord:function(e,r,t,i,n){var a=undefined,o=undefined;var s=oe(i);if(!s&&r.type&&e._hasModelFor(this.modelNameFromPayloadKey(r.type))){a=e.serializerFor(r.type);o=e.modelFor(r.type)}else{a=n;o=i}return a.normalize(o,r,t)},_normalizeResponse:function(e,r,t,i,n,a){var o={data:null,included:[]};var s=this.extractMeta(e,r,t);if(s){o.meta=s}var d=Object.keys(t);for(var u=0,l=d.length;u<l;u++){var c=d[u];var h=c;var f=false;if(c.charAt(0)==="_"){f=true;h=c.substr(1)}var p=this.modelNameFromPayloadKey(h);if(!e.modelFactoryFor(p)){continue}var m=!f&&this.isPrimaryType(e,p,r);var v=t[c];if(v===null){continue}if(m&&Ember.typeOf(v)!=="array"){var y=this._normalizePolymorphicRecord(e,v,c,r,this);var b=y.data;var g=y.included;o.data=b;if(g){var R;(R=o.included).push.apply(R,g)}continue}var _=this._normalizeArray(e,p,v,c);var E=_.data;var F=_.included;if(F){var A;(A=o.included).push.apply(A,F)}if(a){E.forEach(function(e){var r=m&&de(e.id)===i;var t=m&&!i&&!o.data;if(t||r){o.data=e}else{o.included.push(e)}})}else{if(m){o.data=E}else{if(E){var M;(M=o.included).push.apply(M,E)}}}}return o},isPrimaryType:function(e,r,t){var i=e.modelFor(r);return i.modelName===t.modelName},pushPayload:function(e,r){var t={data:[],included:[]};for(var i in r){var n=this.modelNameFromPayloadKey(i);if(!e.modelFactoryFor(n)){continue}var a=e.modelFor(n);var o=e.serializerFor(a.modelName);Ember.makeArray(r[i]).forEach(function(e){var r=o.normalize(a,e,i);var n=r.data;var s=r.included;t.data.push(n);if(s){var d;(d=t.included).push.apply(d,s)}})}e.push(t)},modelNameFromPayloadKey:function(e){return nt(C(e))},serialize:function(e,r){return this._super.apply(this,arguments)},serializeIntoHash:function(e,r,t,i){var n=this.payloadKeyFromModelName(r.modelName);e[n]=this.serialize(t,i)},payloadKeyFromModelName:function(e){return lt(e)},serializePolymorphicType:function(e,r,t){var i=t.key;var n=e.belongsTo(i);var a=this.keyForPolymorphicType(i,t.type,"serialize");i=this.keyForAttribute?this.keyForAttribute(i,"serialize"):i;i=i+"Type";if(i!==a&&this.keyForPolymorphicType===ct.prototype.keyForPolymorphicType){a=i}if(Ember.isNone(n)){r[a]=null}else{r[a]=lt(n.modelName)}},extractPolymorphicRelationship:function(e,r,t){var i=t.key;var n=t.resourceHash;var a=t.relationshipMeta;var o=a.options.polymorphic;var s=this.keyForPolymorphicType(i,e,"deserialize");if(o&&n.hasOwnProperty(s)&&typeof r!=="object"){var d=this.modelNameFromPayloadKey(n[s]);return{id:r,type:d}}return this._super.apply(this,arguments)}});var ht=ct;var ft=mt;function pt(e,r){if(e.has){return e.has(r)}else{return e.hasRegistration(r)}}function mt(e){var r=e.registerOptionsForType||e.optionsForType;r.call(e,"serializer",{singleton:false});r.call(e,"adapter",{singleton:false});e.register("serializer:-default",qr);e.register("serializer:-rest",ht);e.register("adapter:-rest",A);e.register("adapter:-json-api",M);e.register("serializer:-json-api",ut);if(!pt(e,"service:store")){e.register("service:store",jr)}}var vt=Ember.Object.extend({serialize:null,deserialize:null});var yt=Ember.isEmpty;function bt(e){return e===e&&e!==Infinity&&e!==-Infinity}var gt=vt.extend({deserialize:function(e){var r;if(yt(e)){return null}else{r=Number(e);return bt(r)?r:null}},serialize:function(e){var r;if(yt(e)){return null}else{r=Number(e);return bt(r)?r:null}}});var Rt=vt.extend({deserialize:function(e){var r=typeof e;if(r==="string"){return new Date(Ember.Date.parse(e))}else if(r==="number"){return new Date(e)}else if(e===null||e===undefined){return e}else{return null}},serialize:function(e){if(e instanceof Date){return e.toISOString()}else{return null}}});var _t=Ember.isNone;var Et=vt.extend({deserialize:function(e){return _t(e)?null:String(e)},serialize:function(e){return _t(e)?null:String(e)}});var Ft=vt.extend({deserialize:function(e){var r=typeof e;if(r==="boolean"){return e}else if(r==="string"){return e.match(/^true$|^t$|^1$/i)!==null}else if(r==="number"){return e===1}else{return false}},serialize:function(e){return Boolean(e)}});var At=Mt;function Mt(e){e.register("transform:boolean",Ft);e.register("transform:date",Rt);e.register("transform:number",gt);e.register("transform:string",Et)}var zt=kt;function kt(e){var r=e.inject||e.injection;r.call(e,"controller","store","service:store");r.call(e,"route","store","service:store");r.call(e,"data-adapter","store","service:store")}var St=Ember.get;var Tt=Ember.set;var wt=Ember.isEmpty;var Ct=Ember.makeArray;var Dt=Ember.MapWithDefault;var Ot=Ember.ArrayProxy.extend(Ember.Evented,{registerHandlers:function(e,r,t){this.on("becameInvalid",e,r);this.on("becameValid",e,t)},errorsByAttributeName:Ember.computed(function(){return Dt.create({defaultValue:function(){return Ember.A()}})}),errorsFor:function(e){return St(this,"errorsByAttributeName").get(e)},messages:Ember.computed.mapBy("content","message"),content:Ember.computed(function(){return Ember.A()}),unknownProperty:function(e){var r=this.errorsFor(e);if(wt(r)){return null}return r},isEmpty:Ember.computed.not("length").readOnly(),add:function(e,r){var t=St(this,"isEmpty");r=this._findOrCreateMessages(e,r);this.addObjects(r);St(this,"errorsByAttributeName").get(e).addObjects(r);this.notifyPropertyChange(e);if(t&&!St(this,"isEmpty")){this.trigger("becameInvalid")}},_findOrCreateMessages:function(e,r){var t=this.errorsFor(e);return Ct(r).map(function(r){return t.findBy("message",r)||{attribute:e,message:r}})},remove:function(e){if(St(this,"isEmpty")){return}var r=this.rejectBy("attribute",e);Tt(this,"content",r);St(this,"errorsByAttributeName")["delete"](e);this.notifyPropertyChange(e);if(St(this,"isEmpty")){this.trigger("becameValid")}},clear:function(){if(St(this,"isEmpty")){return}var e=St(this,"errorsByAttributeName");var r=Ember.A();e.forEach(function(e,t){r.push(t)});e.clear();r.forEach(function(e){this.notifyPropertyChange(e)},this);this._super();this.trigger("becameValid")},has:function(e){return!wt(this.errorsFor(e))}});var Pt=Ember.get;function It(e,r){var t=[];e.forEach(function(e){if(r.indexOf(e)>=0){t.push(e)}});return t}var Nt=["currentState","data","store"];var Lt=Ember.computed("currentState",function(e){return Pt(this._internalModel.currentState,e)}).readOnly();var xt=Ember.Object.extend(Ember.Evented,{_internalModel:null,store:null,isEmpty:Lt,isLoading:Lt,isLoaded:Lt,hasDirtyAttributes:Ember.computed("currentState.isDirty",function(){return this.get("currentState.isDirty")}),isSaving:Lt,isDeleted:Lt,isNew:Lt,isValid:Lt,dirtyType:Lt,isError:false,isReloading:false,id:null,errors:Ember.computed(function(){var e=Ot.create();e.registerHandlers(this._internalModel,function(){this.send("becameInvalid")},function(){this.send("becameValid")});return e}).readOnly(),adapterError:null,serialize:function(e){return this.store.serialize(this,e)},toJSON:function(e){var r=this.store.serializerFor("-default");var t=this._internalModel.createSnapshot();return r.serialize(t,e)},ready:Ember.K,didLoad:Ember.K,didUpdate:Ember.K,didCreate:Ember.K,didDelete:Ember.K,becameInvalid:Ember.K,becameError:Ember.K,rolledBack:Ember.K,data:Ember.computed.readOnly("_internalModel._data"),send:function(e,r){return this._internalModel.send(e,r)},transitionTo:function(e){return this._internalModel.transitionTo(e)},deleteRecord:function(){this._internalModel.deleteRecord()},destroyRecord:function(e){this.deleteRecord();return this.save(e)},unloadRecord:function(){if(this.isDestroyed){return}this._internalModel.unloadRecord()},_notifyProperties:function(e){Ember.beginPropertyChanges();var r;for(var t=0,i=e.length;t<i;t++){r=e[t];this.notifyPropertyChange(r)}Ember.endPropertyChanges()},changedAttributes:function(){return this._internalModel.changedAttributes()},rollbackAttributes:function(){this._internalModel.rollbackAttributes()},_createSnapshot:function(){return this._internalModel.createSnapshot()},toStringExtension:function(){return Pt(this,"id")},save:function(e){var r=this;return N.create({promise:this._internalModel.save(e).then(function(){return r})})},reload:function(){var e=this;return N.create({promise:this._internalModel.reload().then(function(){return e})})},trigger:function(e){var r=arguments.length;var t=new Array(r-1);for(var i=1;i<r;i++){t[i-1]=arguments[i]}Ember.tryInvoke(this,e,t);this._super.apply(this,arguments)},willDestroy:function(){this._super.apply(this,arguments);this._internalModel.clearRelationships();this._internalModel.recordObjectWillDestroy()},willMergeMixin:function(e){var r=this.constructor},attr:function(){},belongsTo:function(){},hasMany:function(){},setId:Ember.observer("id",function(){this._internalModel.setId(this.get("id"))})});xt.reopenClass({_create:xt.create,create:function(){throw new Ember.Error("You should not call `create` on a model. Instead, call `store.createRecord` with the attributes you would like to set.")},modelName:null});if(Ember.setOwner){Object.defineProperty(xt.prototype,"container",{configurable:true,enumerable:false,get:function(){return this.store.container}})}var $t=xt;var jt=qt;var Kt=Ember.get;var Ht=Ember.Map;$t.reopenClass({attributes:Ember.computed(function(){var e=this;var r=Ht.create();this.eachComputedProperty(function(e,t){if(t.isAttribute){t.name=e;r.set(e,t)}});return r}).readOnly(),transformedAttributes:Ember.computed(function(){var e=Ht.create();this.eachAttribute(function(r,t){if(t.type){e.set(r,t.type)}});return e}).readOnly(),eachAttribute:function(e,r){Kt(this,"attributes").forEach(function(t,i){e.call(r,i,t)})},eachTransformedAttribute:function(e,r){Kt(this,"transformedAttributes").forEach(function(t,i){e.call(r,i,t)})}});$t.reopen({eachAttribute:function(e,r){this.constructor.eachAttribute(e,r)}});function Bt(e,r,t){if(typeof r.defaultValue==="function"){return r.defaultValue.apply(null,arguments)}else{return r.defaultValue}}function Ut(e,r){return r in e._attributes||r in e._inFlightAttributes||r in e._data}function Vt(e,r){if(r in e._attributes){return e._attributes[r]}else if(r in e._inFlightAttributes){return e._inFlightAttributes[r]}else{return e._data[r]}}function qt(e,r){if(typeof e==="object"){r=e;e=undefined}else{r=r||{}}var t={type:e,isAttribute:true,options:r};return Ember.computed({get:function(e){var t=this._internalModel;if(Ut(t,e)){return Vt(t,e)}else{return Bt(this,r,e)}},set:function(e,r){var t=this._internalModel;var i=Vt(t,e);if(r!==i){t._attributes[e]=r;this._internalModel.send("didSetProperty",{name:e,oldValue:i,originalValue:t._data[e],value:r})}return r}}).meta(t)}var Wt=$t;var Qt=Ember.get;var Gt=Ember.String.capitalize;var Jt=Ember.String.underscore;var Yt=Ember;var Xt=Yt.assert;var Zt=Ember.DataAdapter.extend({getFilters:function(){return[{name:"isNew",desc:"New"},{name:"isModified",desc:"Modified"},{name:"isClean",desc:"Clean"}]},detect:function(e){return e!==Wt&&Wt.detect(e)},columnsForType:function(e){var r=[{name:"id",desc:"Id"}];var t=0;var i=this;Qt(e,"attributes").forEach(function(e,n){if(t++>i.attributeLimit){return false}var a=Gt(Jt(n).replace("_"," "));r.push({name:n,desc:a})});return r},getRecords:function(e,r){if(arguments.length<2){var t=e._debugContainerKey;if(t){var i=t.match(/model:(.*)/);if(i){r=i[1]}}}Xt("Cannot find model name. Please upgrade to Ember.js >= 1.13 for Ember Inspector support",!!r);return this.get("store").peekAll(r)},getRecordColumnValues:function(e){var r=this;var t=0;var i={id:Qt(e,"id")};e.eachAttribute(function(n){if(t++>r.attributeLimit){return false}var a=Qt(e,n);i[n]=a});return i},getRecordKeywords:function(e){var r=[];var t=Ember.A(["id"]);e.eachAttribute(function(e){return t.push(e)});t.forEach(function(t){return r.push(Qt(e,t))});return r},getRecordFilterValues:function(e){return{isNew:e.get("isNew"),isModified:e.get("hasDirtyAttributes")&&!e.get("isNew"),isClean:!e.get("hasDirtyAttributes")}},getRecordColor:function(e){var r="black";if(e.get("isNew")){r="green"}else if(e.get("hasDirtyAttributes")){r="blue"}return r},observeRecord:function(e,r){var t=Ember.A();var i=Ember.A(["id","isNew","hasDirtyAttributes"]);e.eachAttribute(function(e){return i.push(e)});var n=this;i.forEach(function(i){var a=function(){r(n.wrapRecord(e))};Ember.addObserver(e,i,a);t.push(function(){Ember.removeObserver(e,i,a)})});var a=function(){t.forEach(function(e){return e()})};return a}});var ei=ri;function ri(e){e.register("data-adapter:main",Zt)}var ti=ii;function ii(e){ei(e);At(e);zt(e);ft(e)}var ni=ai;function ai(e){var r=e.lookup?e:e.container;r.lookup("service:store")}var oi=Ember.K;Ember.onLoad("Ember.Application",function(e){e.initializer({name:"ember-data",initialize:ti});e.instanceInitializer({name:"ember-data",initialize:ni});e.initializer({
name:"store",after:"ember-data",initialize:oi});e.initializer({name:"transforms",before:"store",initialize:oi});e.initializer({name:"data-adapter",before:"store",initialize:oi});e.initializer({name:"injectStore",before:"store",initialize:oi})});Ember.Date=Ember.Date||{};var si=Date.parse;var di=[1,4,5,6,7,10,11];Ember.Date.parse=function(e){var r,t;var i=0;if(t=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(e)){for(var n=0,a;a=di[n];++n){t[a]=+t[a]||0}t[2]=(+t[2]||1)-1;t[3]=+t[3]||1;if(t[8]!=="Z"&&t[9]!==undefined){i=t[10]*60+t[11];if(t[9]==="+"){i=0-i}}r=Date.UTC(t[1],t[2],t[3],t[4],t[5]+i,t[6],t[7])}else{r=si?si(e):NaN}return r};if(Ember.EXTEND_PROTOTYPES===true||Ember.EXTEND_PROTOTYPES.Date){Date.parse=Ember.Date.parse}Wt.reopen({_debugInfo:function(){var e=["id"];var r={belongsTo:[],hasMany:[]};var t=[];this.eachAttribute(function(r,t){return e.push(r)});this.eachRelationship(function(e,i){r[i.kind].push(e);t.push(e)});var i=[{name:"Attributes",properties:e,expand:true},{name:"Belongs To",properties:r.belongsTo,expand:true},{name:"Has Many",properties:r.hasMany,expand:true},{name:"Flags",properties:["isLoaded","hasDirtyAttributes","isSaving","isDeleted","isError","isNew","isValid"]}];return{propertyInfo:{includeOtherProperties:true,groups:i,expensiveProperties:t}}}});var ui=Wt;var li=Zt;var ci=Ember.get;var hi=Ember.set;var fi=Ember.String.camelize;var pi=Ember.Mixin.create({normalize:function(e,r,t){var i=this._super(e,r,t);return this._extractEmbeddedRecords(this,this.store,e,i)},keyForRelationship:function(e,r,t){if(t==="serialize"&&this.hasSerializeRecordsOption(e)||t==="deserialize"&&this.hasDeserializeRecordsOption(e)){return this.keyForAttribute(e,t)}else{return this._super(e,r,t)||e}},serializeBelongsTo:function(e,r,t){var i=t.key;if(this.noSerializeOptionSpecified(i)){this._super(e,r,t);return}var n=this.hasSerializeIdsOption(i);var a=this.hasSerializeRecordsOption(i);var o=e.belongsTo(i);var s;if(n){s=this.keyForRelationship(i,t.kind,"serialize");if(!o){r[s]=null}else{r[s]=o.id;if(t.options.polymorphic){this.serializePolymorphicType(e,r,t)}}}else if(a){this._serializeEmbeddedBelongsTo(e,r,t)}},_serializeEmbeddedBelongsTo:function(e,r,t){var i=e.belongsTo(t.key);var n=this.keyForAttribute(t.key,"serialize");if(!i){r[n]=null}else{r[n]=i.record.serialize({includeId:true});this.removeEmbeddedForeignKey(e,i,t,r[n]);if(t.options.polymorphic){this.serializePolymorphicType(e,r,t)}}},serializeHasMany:function(e,r,t){var i=t.key;if(this.noSerializeOptionSpecified(i)){this._super(e,r,t);return}var n=this.hasSerializeIdsOption(i);var a=this.hasSerializeRecordsOption(i);if(n){var o=this.keyForRelationship(i,t.kind,"serialize");r[o]=e.hasMany(i,{ids:true})}else if(a){this._serializeEmbeddedHasMany(e,r,t)}},_serializeEmbeddedHasMany:function(e,r,t){var i=this.keyForAttribute(t.key,"serialize");r[i]=this._generateSerializedHasMany(e,t)},_generateSerializedHasMany:function(e,r){var t=this;var i=e.hasMany(r.key);return Ember.A(i).map(function(i){var n=i.record.serialize({includeId:true});t.removeEmbeddedForeignKey(e,i,r,n);return n})},removeEmbeddedForeignKey:function(e,r,t,i){if(t.kind==="hasMany"){return}else if(t.kind==="belongsTo"){var n=e.type.inverseFor(t.key,this.store);if(n){var a=n.name;var o=this.store.serializerFor(r.modelName);var s=o.keyForRelationship(a,n.kind,"deserialize");if(s){delete i[s]}}}},hasEmbeddedAlwaysOption:function(e){var r=this.attrsOption(e);return r&&r.embedded==="always"},hasSerializeRecordsOption:function(e){var r=this.hasEmbeddedAlwaysOption(e);var t=this.attrsOption(e);return r||t&&t.serialize==="records"},hasSerializeIdsOption:function(e){var r=this.attrsOption(e);return r&&(r.serialize==="ids"||r.serialize==="id")},noSerializeOptionSpecified:function(e){var r=this.attrsOption(e);return!(r&&(r.serialize||r.embedded))},hasDeserializeRecordsOption:function(e){var r=this.hasEmbeddedAlwaysOption(e);var t=this.attrsOption(e);return r||t&&t.deserialize==="records"},attrsOption:function(e){var r=this.get("attrs");return r&&(r[fi(e)]||r[e])},_extractEmbeddedRecords:function(e,r,t,i){var n=this;t.eachRelationship(function(t,a){if(e.hasDeserializeRecordsOption(t)){if(a.kind==="hasMany"){n._extractEmbeddedHasMany(r,t,i,a)}if(a.kind==="belongsTo"){n._extractEmbeddedBelongsTo(r,t,i,a)}}});return i},_extractEmbeddedHasMany:function(e,r,t,i){var n=this;var a=ci(t,"data.relationships."+r+".data");if(!a){return}var o=a.map(function(r){var a=n._normalizeEmbeddedRelationship(e,i,r);var o=a.data;var s=a.included;t.included=t.included||[];t.included.push(o);if(s){var d;(d=t.included).push.apply(d,s)}return{id:o.id,type:o.type}});var s={data:o};hi(t,"data.relationships."+r,s)},_extractEmbeddedBelongsTo:function(e,r,t,i){var n=ci(t,"data.relationships."+r+".data");if(!n){return}var a=this._normalizeEmbeddedRelationship(e,i,n);var o=a.data;var s=a.included;t.included=t.included||[];t.included.push(o);if(s){var d;(d=t.included).push.apply(d,s)}var u={id:o.id,type:o.type};var l={data:u};hi(t,"data.relationships."+r,l)},_normalizeEmbeddedRelationship:function(e,r,t){var i=r.type;if(r.options.polymorphic){i=t.type}var n=e.modelFor(i);var a=e.serializerFor(i);return a.normalize(n,t,null)}});var mi=pi;function vi(e,r){var t,i;if(typeof e==="object"){t=e;i=undefined}else{t=r;i=e}if(typeof i==="string"){i=C(i)}t=t||{};var n={type:i,isRelationship:true,options:t,kind:"belongsTo",key:null};return Ember.computed({get:function(e){if(t.hasOwnProperty("serialize")){}if(t.hasOwnProperty("embedded")){}return this._internalModel._relationships.get(e).getRecord()},set:function(e,r){if(r===undefined){r=null}if(r&&r.then){this._internalModel._relationships.get(e).setRecordPromise(r)}else if(r){this._internalModel._relationships.get(e).setRecord(r._internalModel)}else{this._internalModel._relationships.get(e).setRecord(r)}return this._internalModel._relationships.get(e).getRecord()}}).meta(n)}Wt.reopen({notifyBelongsToChanged:function(e){this.notifyPropertyChange(e)}});var yi=vi;var bi=gi;function gi(e){if(!e||e.setInterval){return false}if(Array.isArray(e)){return true}if(Ember.Array.detect(e)){return true}var r=Ember.typeOf(e);if("array"===r){return true}if(e.length!==undefined&&"object"===r){return true}return false}function Ri(e,r){if(typeof e==="object"){r=e;e=undefined}r=r||{};if(typeof e==="string"){e=C(e)}var t={type:e,isRelationship:true,options:r,kind:"hasMany",key:null};return Ember.computed({get:function(e){var r=this._internalModel._relationships.get(e);return r.getRecords()},set:function(e,r){var t=this._internalModel._relationships.get(e);t.clear();t.addRecords(Ember.A(r).mapBy("_internalModel"));return t.getRecords()}}).meta(t)}Wt.reopen({notifyHasManyAdded:function(e){this.notifyPropertyChange(e)}});var _i=Ri;function Ei(e){var r;r=e.type||e.key;if(e.kind==="hasMany"){r=nt(C(r))}return r}function Fi(e){return{key:e.key,kind:e.kind,type:Ei(e),options:e.options,parentType:e.parentType,isRelationship:true}}var Ai=Ember.get;var Mi=Ember.Map;var zi=Ember.MapWithDefault;var ki=Ember.computed(function(){if(Ember.testing===true&&ki._cacheable===true){ki._cacheable=false}var e=new zi({defaultValue:function(){return[]}});this.eachComputedProperty(function(r,t){if(t.isRelationship){t.key=r;var i=e.get(Ei(t));i.push({name:r,kind:t.kind})}});return e}).readOnly();var Si=Ember.computed(function(){var e=this;if(Ember.testing===true&&Si._cacheable===true){Si._cacheable=false}var r;var t=Ember.A();this.eachComputedProperty(function(e,i){if(i.isRelationship){i.key=e;r=Ei(i);if(!t.contains(r)){t.push(r)}}});return t}).readOnly();var Ti=Ember.computed(function(){if(Ember.testing===true&&Ti._cacheable===true){Ti._cacheable=false}var e=Mi.create();this.eachComputedProperty(function(r,t){if(t.isRelationship){t.key=r;var i=Fi(t);i.type=Ei(t);e.set(r,i)}});return e}).readOnly();Wt.reopen({didDefineProperty:function(e,r,t){if(t instanceof Ember.ComputedProperty){var i=t.meta();i.parentType=e.constructor}}});Wt.reopenClass({typeForRelationship:function(e,r){var t=Ai(this,"relationshipsByName").get(e);return t&&r.modelFor(t.type)},inverseMap:Ember.computed(function(){return new v}),inverseFor:function(e,r){var t=Ai(this,"inverseMap");if(t[e]){return t[e]}else{var i=this._findInverseFor(e,r);t[e]=i;return i}},_findInverseFor:function(e,r){var t=this.typeForRelationship(e,r);if(!t){return null}var i=this.metaForProperty(e);var n=i.options;if(n.inverse===null){return null}var a,o,s;if(n.inverse){a=n.inverse;s=Ember.get(t,"relationshipsByName").get(a);o=s.kind}else{if(i.type===i.parentType.modelName){}var d=l(this,t);if(d.length===0){return null}var u=d.filter(function(r){var i=t.metaForProperty(r.name).options;return e===i.inverse});if(u.length===1){d=u}a=d[0].name;o=d[0].kind}function l(r,t,i){var n=i||[];var a=Ai(t,"relationships");if(!a){return n}var o=a.get(r.modelName);o=o.filter(function(r){var i=t.metaForProperty(r.name).options;if(!i.inverse){return true}return e===i.inverse});if(o){n.push.apply(n,o)}if(r.superclass){l(r.superclass,t,n)}return n}return{type:t,name:a,kind:o}},relationships:ki,relationshipNames:Ember.computed(function(){var e={hasMany:[],belongsTo:[]};this.eachComputedProperty(function(r,t){if(t.isRelationship){e[t.kind].push(r)}});return e}),relatedTypes:Si,relationshipsByName:Ti,fields:Ember.computed(function(){var e=Mi.create();this.eachComputedProperty(function(r,t){if(t.isRelationship){e.set(r,t.kind)}else if(t.isAttribute){e.set(r,"attribute")}});return e}).readOnly(),eachRelationship:function(e,r){Ai(this,"relationshipsByName").forEach(function(t,i){e.call(r,i,t)})},eachRelatedType:function(e,r){Ai(this,"relatedTypes").forEach(function(t){e.call(r,t)})},determineRelationshipType:function(e,r){var t=e.key;var i=e.kind;var n=this.inverseFor(t,r);var a,o;if(!n){return i==="belongsTo"?"oneToNone":"manyToNone"}a=n.name;o=n.kind;if(o==="belongsTo"){return i==="belongsTo"?"oneToOne":"manyToOne"}else{return i==="belongsTo"?"oneToMany":"manyToMany"}}});Wt.reopen({eachRelationship:function(e,r){this.constructor.eachRelationship(e,r)},relationshipFor:function(e){return Ai(this.constructor,"relationshipsByName").get(e)},inverseFor:function(e){return this.constructor.inverseFor(e,this.store)}});var wi=Ci;function Ci(e){this.container=e}Ci.prototype.aliasedFactory=function(e,r){var t=this;return{create:function(){if(r){r()}return t.container.lookup(e)}}};Ci.prototype.registerAlias=function(e,r,t){var i=this.aliasedFactory(r,t);return this.container.register(e,i)};Ci.prototype.registerDeprecation=function(e,r){var t=function(){};return this.registerAlias(e,r,t)};Ci.prototype.registerDeprecations=function(e){var r,t,i,n;for(r=e.length;r>0;r--){t=e[r-1];i=t["deprecated"];n=t["valid"];this.registerDeprecation(i,n)}};if(Ember.VERSION.match(/^1\.[0-7]\./)){throw new Ember.Error("Ember Data requires at least Ember 1.8.0, but you have "+Ember.VERSION+". Please upgrade your version of Ember, then upgrade Ember Data")}if(Ember.VERSION.match(/^1\.12\.0/)){throw new Ember.Error("Ember Data does not work with Ember 1.12.0. Please upgrade to Ember 1.12.1 or higher.")}S.Store=Dr;S.PromiseArray=I;S.PromiseObject=N;S.PromiseManyArray=j;S.Model=Wt;S.RootState=Ve;S.attr=jt;S.Errors=Ot;S.InternalModel=ur;S.Snapshot=or;S.Adapter=m;S.AdapterError=s;S.InvalidError=d;S.TimeoutError=u;S.AbortError=l;S.errorsHashToArray=c;S.errorsArrayToHash=h;S.Serializer=Kr;S.DebugAdapter=li;S.RecordArray=pe;S.FilteredRecordArray=ve;S.AdapterPopulatedRecordArray=Re;S.ManyArray=Je;S.RecordArrayManager=ke;S.RESTAdapter=A;S.BuildURLMixin=t;S.RESTSerializer=ht;S.JSONSerializer=qr;S.JSONAPIAdapter=M;S.JSONAPISerializer=ut;S.Transform=vt;S.DateTransform=Rt;S.StringTransform=Et;S.NumberTransform=gt;S.BooleanTransform=Ft;S.EmbeddedRecordsMixin=mi;S.belongsTo=yi;S.hasMany=_i;S.Relationship=qe;S.ContainerProxy=wi;S._setupContainer=ti;Object.defineProperty(S,"normalizeModelName",{enumerable:true,writable:false,configurable:false,value:C});Ember.lookup.DS=S;var Di=S;var Oi=Ii;var Pi=Ember.Error;function Ii(e){Pi.call(this,"The backend rejected the commit because it was invalid: "+Ember.inspect(e));this.errors=e}Ii.prototype=Object.create(Pi.prototype);var Ni=Li;function Li(r){if(e.Helper){return e.Helper.helper(r)}if(e.HTMLBars){return e.HTMLBars.makeBoundHelper(r)}return e.Handlebars.makeBoundHelper(r)}var xi=Ni(function(e){var r,t;if(e.length===1){t=e[0];return it(t)}else{r=e[0];t=e[1];if((r|0)!==1){t=it(t)}return r+" "+t}});var $i=Ni(function(e){return nt(e[0])})}).call(this);